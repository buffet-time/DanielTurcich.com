import{d as q,r as p,k as V,o,c as u,a as e,t as c,u as a,e as C,F as g,m as z,n as B,j as N,w as $,p as D,v as T,f as L,b as I,q as Y,g as M,_ as E,s as F,x as R,y as U,z as A}from"./index.0d77144a.js";import{d as K,c as O}from"./dialog-polyfill.esm.c4f433fc.js";var s=(t=>(t[t.artist=0]="artist",t[t.name=1]="name",t[t.score=2]="score",t[t.type=3]="type",t[t.year=4]="year",t[t.genre=5]="genre",t[t.comments=6]="comments",t))(s||{});const G={class:"tw-card m-0 p-2 h-full bg-transparent flex flex-col items-center justify-center"},H={class:"overflow-hidden text-ellipsis max-w-full whitespace-nowrap"},J={class:"flex max-w-full gap-1"},Q={class:"flex-auto overflow-hidden whitespace-nowrap text-ellipsis"},W={class:"flex-none"},X={id:"releaseModal",class:"text-neutral-300 bg-[#383838]"},Z={class:"flex items-center justify-between p-4 border-b border-solid border-[#dee2e6]"},ee={class:"whitespace-nowrap"},te=["d"],se={class:"flex flex-col items-center justify-center p-4 border-b border-solid border-[#dee2e6]"},ae={class:"mb-4"},le=C("No comments for this release."),re={class:"flex justify-between p-4 items-center"},oe=q({__name:"MusicRelease",props:{index:null,release:null},setup(t){const d=t,y=p();V(()=>{typeof HTMLDialogElement!="function"&&K.registerDialog(y.value)});function v(){navigator.clipboard.writeText(` ${d.release[s.artist]} - ${d.release[s.name]}: ${d.release[s.score]}`)}function m(){y.value.showModal()}function f(){y.value.close()}return(n,w)=>(o(),u(g,null,[e("div",{class:"tw-card bg-neutral-500 text-center m-2 cursor-pointer w-80 h-24 rounded",onClick:m},[e("div",G,[e("div",H,c(t.release[a(s).artist]),1),e("div",J,[e("div",Q,c(t.release[a(s).name]),1),e("div",W,"("+c(t.release[a(s).score])+"/10)",1)])])]),e("dialog",{ref_key:"releaseModal",ref:y,class:"bg-transparent p-0 w-[88vw] max-w-xl"},[e("div",X,[e("div",Z,[e("h5",null,[C(c(t.release[a(s).artist])+" - "+c(t.release[a(s).name])+" ",1),e("span",ee," ( "+c(t.release[a(s).score])+"/10 ) ",1)]),(o(),u("svg",{class:"w-6 min-w-[24px] cursor-pointer",viewBox:"0 0 24 24",onClick:f},[e("path",{fill:"currentColor",d:a(O)},null,8,te)]))]),e("div",se,[e("div",ae,"Genres: "+c(t.release[a(s).genre]),1),t.release.length===7?(o(),u(g,{key:0},[C(c(t.release[a(s).comments]),1)],64)):(o(),u(g,{key:1},[le],64))]),e("div",re,[C(" ("+c(t.release[a(s).year])+" "+c(t.release[a(s).type])+") ",1),e("div",null,[e("button",{class:"tw-button mr-2",onClick:v},"Copy"),e("button",{type:"button",class:"tw-button",onClick:f}," Close ")])])])],512)],64))}}),ne={id:"searchContent",class:"w-full"},ce=e("h3",{class:"mb-2"},"Search by:",-1),ue=["value"],ie=["value"],de=["value"],he=["value"],ve=["value"],fe={class:"m-4 flex justify-center"},me={key:0,class:"flex flex-col"},be={class:"mb-1"},ye={key:1,class:"flex flex-col"},pe={for:"customRange1",class:"form-label"},_e=["placeholder","min","max"],we=["onKeyup"],ge=["disabled"],xe={key:0,ref:"releases",class:"m-2 mt-4 mb-2 flex flex-wrap justify-center"},Se={key:1},ke=q({__name:"Search",props:{search:null},setup(t){const d=t,y=z(),v=B();let m=!0;const f=p([[""]]),n=p(s.artist),w=p(!1),x=p(!1),l=p("");N(n,()=>{if(!(m&&v.query.term)){switch(n.value){case s.score:l.value="7";break;case s.type:l.value="Album";break;case s.year:l.value=String(d.search.currentYear);break;default:l.value=""}y.replace({query:{tab:"Search",term:l.value,type:s[n.value]}})}}),V(()=>{if(v.query.term){l.value=v.query.term,n.value=s[v.query.type];const r=setInterval(()=>{d.search.initializing||(_(),clearInterval(r),m=!1)},250)}else v.query.type&&(n.value=s[v.query.type]),m=!1});function _(){w.value=!1,x.value=!1,l.value=l.value.trim();let r=!1;switch(n.value){case s.score:r=!0;break;case s.type:r=!0;break;case s.year:r=!0;break}f.value=b(n.value,r),f.value.length>0?w.value=!0:x.value=!0,y.replace({query:{tab:"Search",term:l.value,type:s[n.value]}})}function b(r,h){return d.search.releasesArray.filter(i=>h?i[r].toLowerCase()===l.value.toLowerCase():i[r].toLowerCase().includes(l.value.toLowerCase()))}return(r,h)=>(o(),u("div",ne,[ce,$(e("select",{"onUpdate:modelValue":h[0]||(h[0]=i=>n.value=i),class:"text-black pl-4 py-2 rounded w-72"},[e("option",{selected:"",value:a(s).artist},"Artist",8,ue),e("option",{value:a(s).name},"Release Name",8,ie),e("option",{value:a(s).score},"Score",8,de),e("option",{value:a(s).year},"Year",8,he),e("option",{value:a(s).genre},"Genre",8,ve)],512),[[D,n.value]]),e("div",fe,[n.value===a(s).score?(o(),u("div",me,[e("div",be,c(l.value),1),$(e("input",{"onUpdate:modelValue":h[1]||(h[1]=i=>l.value=i),placeholder:"10",type:"range",class:"w-64 bg-transparent h-2",min:"0",max:"10",step:"0.5"},null,512),[[T,l.value]])])):n.value===a(s).year?(o(),u("div",ye,[e("label",pe,c(l.value),1),$(e("input",{"onUpdate:modelValue":h[2]||(h[2]=i=>l.value=i),placeholder:String(t.search.currentYear),type:"range",class:"w-64 bg-transparent h-2",min:t.search.earliestYear,max:t.search.currentYear,step:"1"},null,8,_e),[[T,l.value]])])):$((o(),u("input",{key:2,"onUpdate:modelValue":h[3]||(h[3]=i=>l.value=i),class:"w-64 py-2 px-3 text-black rounded",placeholder:"Search input",onKeyup:L(_,["enter"])},null,40,we)),[[T,l.value]]),e("button",{disabled:t.search.initializing||l.value.length<1,class:"ml-4 tw-button",onClick:_}," Search ",8,ge)]),w.value?(o(),u("div",xe,[(o(!0),u(g,null,I(f.value,(i,S)=>(o(),Y(oe,{key:S,index:S,release:i},null,8,["index","release"]))),128))],512)):M("",!0),x.value?(o(),u("div",Se,"No results from your search.")):M("",!0)]))}});const k=t=>(F("data-v-d94cb686"),t=t(),R(),t),$e={id:"statsContent",class:"w-full flex justify-center"},Ce={class:"table-auto text-white w-96 border-collapse bg-[#212529]"},Me=k(()=>e("thead",{class:"border-solid p-2"},[e("tr",null,[e("th",null,"Stat"),e("th",null,"Value")])],-1)),qe=k(()=>e("th",null,"Number of releases",-1)),Te=k(()=>e("th",null,"Number of artists",-1)),Ye=k(()=>e("th",null,"Average Year",-1)),je=k(()=>e("th",null,"Average Score",-1)),Ae={key:0},Pe={key:1},Ve=q({__name:"Stats",props:{stats:null},setup(t){return(d,y)=>(o(),u("div",$e,[e("table",Ce,[Me,e("tbody",null,[e("tr",null,[qe,e("td",null,c(t.stats.numberOfReleases),1)]),e("tr",null,[Te,e("td",null,c(t.stats.numberOfArtists),1)]),e("tr",null,[Ye,e("td",null,c(t.stats.averageYear),1)]),e("tr",null,[je,e("td",null,c(t.stats.averageScore),1)]),(o(!0),u(g,null,I(t.stats.releasesPerYear,(v,m)=>(o(),u("tr",{key:m},[m>0?(o(),u("th",Ae," Releases in the "+c(`${1950+m*10}s`),1)):(o(),u("th",Pe,"Releases before 1960")),e("td",null,c(v),1)]))),128))])])]))}});var ze=E(Ve,[["__scopeId","data-v-d94cb686"]]);async function P(t){try{const d=await fetch(t);return d.ok?await d.json():(console.error("Responded with an error:"+await d.json()),null)}catch(d){return console.error(`Error in fetch call: ${d}`),null}}const Be={class:"tw-flex-col-center gap-4"},Ie=e("h1",{class:"mt-4 text-2xl font-semibold"},"My Music Page",-1),Le=q({__name:"Music",setup(t){const d=B(),y=z(),v=p(!0),m=p([[""]]),f=p("Stats"),n=p();U(()=>{const b=d.query.tab;b==="Search"?l(b):_("Stats");let r=0;function h(){r>2&&console.error("Can't get the data :("),Promise.all([w(),x()]).then(i=>{const S=i[0],j=i[1];S&&j?(m.value=S,n.value=j,v.value=!1):setTimeout(()=>{h(),r++},5e3)}).catch(i=>{console.error(`Error in Music.vue promise.all(): ${i}`)})}h()});async function w(){return await P("https://api.danielturcich.com/Releases")}async function x(){return await P("https://api.danielturcich.com/Stats")}function l(b){f.value=b}function _(b){const r={query:{tab:b}};b==="Search"&&(r.query.type="artist"),y.replace(r),l(b)}return(b,r)=>(o(),u("div",Be,[Ie,e("div",null,[e("button",{class:A(["tw-tab-button",{"bg-white":a(f)==="Stats","text-neutral-600":a(f)==="Stats"}]),type:"button",onClick:r[0]||(r[0]=h=>_("Stats"))}," Stats ",2),e("button",{class:A(["tw-tab-button",{"bg-white":a(f)==="Search","text-neutral-600":a(f)==="Search"}]),type:"button",onClick:r[1]||(r[1]=h=>_("Search"))}," Search ",2)]),v.value?M("",!0):(o(),u(g,{key:0},[a(f)==="Stats"?(o(),Y(ze,{key:0,stats:a(n)},null,8,["stats"])):a(f)==="Search"?(o(),Y(ke,{key:1,search:{currentYear:a(n).currentYear,earliestYear:a(n).earliestYear,releasesArray:m.value,initializing:v.value}},null,8,["search"])):M("",!0)],64))]))}});export{Le as default};
