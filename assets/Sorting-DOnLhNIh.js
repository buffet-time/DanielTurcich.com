import{k as G,d as D,l as V,f as H,c as q,o as C,r as y,a as x,b as P,t as B,w as O,v as I,m as Q,F as j,e as W,n as J}from"./index-gN_Ubj-p.js";let _=G("stopExecution",{state:()=>({_stopExecution:!1}),getters:{stopExecution:a=>a._stopExecution},actions:{setStopExecution(a){this._stopExecution=a}}});async function K(a,h,c){let u=_();async function n(l){if(u.stopExecution)return[];if(l.length<2)return l;let r=Math.floor(l.length/2);return p(await n(l.slice(0,r)),await n(l.slice(r)))}async function p(l,r){let w=[],s=0,d=0;for(;s<l.length&&d<r.length;){if(l[s].height<r[d].height){w.push(l[s]),s++;continue}w.push(r[d]),d++}let v=[...w,...l.slice(s),...r.slice(d)],E=v.map(g=>(h(g),{x:g.x,frequency:g.frequency})).sort((g,S)=>g.x-S.x);for(let g=0;g<E.length;g++)v[g].x=E[g].x,v[g].frequency=E[g].frequency;let f=[],M=v.map(g=>g.height);M.forEach(g=>f.push(a.findIndex(S=>S.height===v[M.findIndex(k=>k===g)].height)));for(let g=0;g<v.length;g++){if(u.stopExecution)return[];await c(f[g])}return v}await n(a)}async function L(a,h){let c=_(),u=0;async function n(l,r){u=await p(l,r),!c.stopExecution&&(l<u-1&&await n(l,u-1),u<r&&await n(u,r))}async function p(l,r){let w=a[Math.floor((r+l)/2)];for(;l<=r;){if(c.stopExecution)return 0;for(;a[l].height<w.height;)l++;for(;a[r].height>w.height;)r--;l<=r&&await h(l,r),l++,r--}return l}await n(0,a.length-1)}async function X(a,h,c){let u=_();async function n(p){if(u.stopExecution){console.log(1);return}let l=Number(h.numberOfRectangles),r=l,w=!0;for(;r!==1||w===!0;){var s;if(u.stopExecution)return;r=(s=r)===1?s:Math.floor(s/1.25),w=!1;for(let d=0;d<l-r;d++)p[d].height>p[d+r].height&&(await c(d,d+r),w=!0)}}await n(a)}let Y={id:"canvas",class:"w-[calc(100vw_-_288px)]"},Z=D({__name:"SortingVisualization",props:{algorithm:{},startSortingMethod:{type:Boolean}},emits:["randomizeArrayDone","sortingMethodEnded","audioForRandomizing","sortingMethodStarted","sortingMethodEndedBools","sortingMethodStartedBools","beep"],setup(a,{emit:h}){let c,u,n=[];function p(t,e){[n[t].x,n[e].x,n[t].frequency,n[e].frequency,n[t],n[e]]=[n[e].x,n[t].x,n[e].frequency,n[t].frequency,n[e],n[t]]}function l(){n=[];let t=u.width/Number(a.algorithm.numberOfRectangles),e=u.height/Number(a.algorithm.numberOfRectangles),i=1e4/Number(a.algorithm.numberOfRectangles);for(let o=0;o<Number(a.algorithm.numberOfRectangles);o++)n.push({x:t*o,y:u.height-e*(o+1),width:t-1,height:e*(o+1),frequency:i*o+100});for(let o=0;o<10*Number(a.algorithm.numberOfRectangles);o++)r()}function r(){let t=Math.floor(Math.random()*Number(a.algorithm.numberOfRectangles)),e=0;do e=Math.floor(Math.random()*Number(a.algorithm.numberOfRectangles));while(t===e);p(t,e)}async function w(){for(let t=0;t<Number(a.algorithm.numberOfRectangles);t++)await d(t,!0);await M(0)}async function s(t,e){v(t),v(e),p(t,e),await f(t),await f(e)}async function d(t,e){function i(){c.fillRect(n[t].x,n[t].y,n[t].width,n[t].height)}e?queueMicrotask(()=>{i()}):(i(),await M(Number(a.algorithm.sleepTime)))}function v(t){c.fillStyle="#303030",c.fillRect(n[t].x-1,n[t].y-1,n[t].width+2,n[t].height+2),c.fillStyle="#0F0"}function E(t){c.fillStyle="#303030",c.fillRect(t.x-1,t.y-1,t.width+2,t.height+2),c.fillStyle="#0F0"}async function f(t){h("beep",n[t].frequency),await d(t)}function M(t){return new Promise(e=>setTimeout(e,t))}async function g(){let t=n.length,e=!1,i=0,o=0;do for(i++,e=!1,o=0;o<t-i;o++){if(a.algorithm.stopExecution)return;n[o].height>n[o+1].height&&(await s(o,o+1),e=!0)}while(e)}async function S(){let t,e=n.length,i=0;for(let o=1;o<e;o++){for(t=n[o],i=o-1;i>=0&&n[i].height>t.height;i--){if(a.algorithm.stopExecution)return;await s(i,i+1)}n[i+1]=t}}async function k(){let t=0,e=0;for(let i=0;i<n.length;i++){for(t=i,e=i+1;e<n.length;e++){if(a.algorithm.stopExecution)return;n[e].height<n[t].height&&(t=e)}t!==i&&await s(i,t)}}async function z(){let t=!1,e=0;for(;!t;){for(t=!0;e<n.length-1;){if(a.algorithm.stopExecution)return;n[e].height>n[e+1].height&&(await s(e,e+1),t=!1),e++}if(t)break;for(t=!0;e>0;){if(a.algorithm.stopExecution)return;n[e-1].height>n[e].height&&await s(e,e-1),t=!1,e--}}}async function F(){async function t(e,i){let o=i,R=2*i+1,m=2*i+2;a.algorithm.stopExecution||(R<e&&n[R].height>n[o].height&&(o=R),m<e&&n[m].height>n[o].height&&(o=m),o!==i&&(await s(i,o),await t(e,o)))}for(let e=Math.floor(n.length/2-1);e>=0;e--){if(a.algorithm.stopExecution)return;await t(n.length,e)}for(let e=n.length-1;e>=0;e--){if(a.algorithm.stopExecution)return;await s(0,e),await t(e,0)}}async function T(){let t=0,e=0;for(let i=Math.floor(n.length/2);i>0;i=Math.floor(i/2))for(e=i;e<n.length;e+=1){let o=n[e];for(t=e;t>=i&&n[t-i].height>o.height;t-=i){if(a.algorithm.stopExecution)return;await s(t,t-i)}n[t].x=o.x,n[t]=o}}async function A(){for(let t=1;t<n.length;t++)if(n[t-1].height>n[t].height)for(;t>0&&n[t-1].height>n[t].height;){if(a.algorithm.stopExecution)return;await s(t,t-1),t--}}async function N(){async function t(){for(let e=0;e<Number(a.algorithm.numberOfRectangles);e++)v(e);for(let e=0;e<Number(a.algorithm.numberOfRectangles);e++)r();for(let e=0;e<Number(a.algorithm.numberOfRectangles);e++)await f(e)}for(;function(){for(let e=1;e<n.length;e++)if(n[e-1].height>n[e].height)return!0;return!1}();){if(a.algorithm.stopExecution)return;await t()}}return V(()=>a.algorithm.randomizeArray,async t=>{t&&(h("sortingMethodStartedBools"),h("audioForRandomizing"),c.fillStyle="#303030",c.fillRect(0,0,u.width,u.height),c.fillStyle="#0F0",l(),await w(),a.algorithm.oscillator.disconnect(),h("sortingMethodEndedBools"),h("randomizeArrayDone"))}),V(()=>a.startSortingMethod,async()=>{if(a.startSortingMethod){switch(h("sortingMethodStarted"),a.algorithm.sortingMethod){case"Bubble":await g();break;case"Cocktail Shaker":await z();break;case"Heap":await F();break;case"Insertion":await S();break;case"Merge":await K(n,E,f);break;case"Quick":await L(n,s);break;case"Selection":await k();break;case"Shell":await T();break;case"Gnome":await A();break;case"Bogo":await N();break;case"Comb":await X(n,a.algorithm,s)}h("sortingMethodEnded")}}),H(async()=>{h("sortingMethodStartedBools"),(u=document.getElementById("canvas")).setAttribute("height",String(window.innerHeight-64)),u.setAttribute("width",String(window.innerWidth-300)),c=u.getContext("2d"),u.setAttribute("height",String(Number(getComputedStyle(u).getPropertyValue("height").slice(0,-2))*window.devicePixelRatio)),u.setAttribute("width",String(Number(getComputedStyle(u).getPropertyValue("width").slice(0,-2))*window.devicePixelRatio)),c.fillStyle="#0F0",l(),await w(),h("sortingMethodEndedBools")}),(t,e)=>(C(),q("canvas",Y))}}),$={class:"flex h-[calc(100vh_-_64px)]"},tt={class:"flex flex-col justify-center items-center gap-2 w-72"},et={class:"flex flex-col"},nt=["disabled"],at={class:"flex flex-col justify-center items-center gap-2"},it={class:"flex gap-2"},ot=["disabled"],lt=["disabled"],rt=["value"],st=D({__name:"Sorting",setup(a){let h,c,u=_(),n=y(0),p=y(.025),l=y(!1),r=y(!1),w=y(!0),s=y(100),d=y(!1),v=y(!1),E=y(!1),f=y(),M=y("Quick"),g=y(["Bubble","Insertion","Cocktail Shaker","Selection","Merge","Quick","Heap","Shell","Gnome","Bogo","Comb"]),S=y(!1),k=!1;async function z(){u.setStopExecution(!0),l.value=!0,f.value?.disconnect(),await new Promise(R=>setTimeout(R,500)),u.setStopExecution(!1),l.value=!1,f.value?.disconnect(),N()}function F(){t(),f.value?.connect(c).connect(h.destination),A()}function T(){f.value?.disconnect(),N(),S.value=!1}function A(){E.value=!0,v.value=!0,d.value=!0,w.value=!1}function N(){E.value=!1,v.value=!1,d.value=!1,w.value=!0}function t(){k||(c=new GainNode(h=new AudioContext,{gain:p.value}),f.value=new OscillatorNode(h,{type:"sine",frequency:500}),f.value.start(),f.value.connect(h.destination),f.value.disconnect(),k=!0)}function e(R){f.value?.frequency.setValueAtTime(R,h.currentTime)}function i(){t(),f.value?.connect(c).connect(h.destination),e(300)}function o(){S.value||(S.value=!0)}return V(s,()=>{t(),d.value=!0}),V(p,()=>{if(t(),d.value){f.value?.disconnect(),c.gain.setValueAtTime(p.value,h.currentTime),f.value?.connect(c).connect(h.destination);return}c.gain.setValueAtTime(p.value,h.currentTime)}),(R,m)=>(C(),q("div",$,[x("div",tt,[x("div",et,[m[6]||(m[6]=x("div",{class:"p-4"}," Currently a few bugs, refactoring and updating this right now :) ",-1)),x("div",null,[P(" Volume: "+B(parseFloat((500*p.value).toFixed(1)))+"% ",1),O(x("input",{"onUpdate:modelValue":m[0]||(m[0]=b=>p.value=b),class:"w-64 h-6 bg-transparent",type:"range",min:"0",max:"0.2",step:"0.0001"},null,512),[[I,p.value]])]),x("div",null,[P(" Add extra Delay of: "+B(n.value)+"ms ",1),O(x("input",{"onUpdate:modelValue":m[1]||(m[1]=b=>n.value=b),class:"w-64 h-6 bg-transparent",type:"range",min:"0",max:"250",step:"5"},null,512),[[I,n.value]])]),x("div",null,[P(B(s.value)+" Rectangles ",1),O(x("input",{"onUpdate:modelValue":m[2]||(m[2]=b=>s.value=b),class:"w-64 h-6 bg-transparent",type:"range",min:"5",max:"1000",step:"5",disabled:E.value},null,8,nt),[[I,s.value]])])]),x("div",at,[x("div",it,[x("button",{class:"tw-button h-[50px] w-[130px] p-0",disabled:w.value,onClick:z}," Stop Execution ",8,ot),x("button",{class:"tw-button h-[50px] w-[130px] p-0",disabled:v.value,onClick:m[3]||(m[3]=b=>r.value=!0)}," Randomize ",8,lt)]),O(x("select",{"onUpdate:modelValue":m[4]||(m[4]=b=>M.value=b),class:"tw-music-select h-12"},[(C(!0),q(j,null,W(g.value,(b,U)=>(C(),q("option",{key:U,value:b},B(b),9,rt))),128))],512),[[Q,M.value]]),x("button",{class:"tw-button h-[50px] w-[130px] p-0",onClick:o}," Start sort ")])]),J(Z,{algorithm:{sleepTime:n.value,stopExecution:l.value,randomizeArray:r.value,oscillator:f.value,numberOfRectangles:s.value,sortingMethod:M.value},"start-sorting-method":S.value,onSortingMethodStartedBools:A,onSortingMethodEndedBools:N,onSortingMethodStarted:F,onAudioForRandomizing:i,onSortingMethodEnded:T,onRandomizeArrayDone:m[5]||(m[5]=b=>r.value=!1),onBeep:e},null,8,["algorithm","start-sorting-method"])]))}});export{st as default};
