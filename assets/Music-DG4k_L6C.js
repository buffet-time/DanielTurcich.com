import{d as M,r as y,f as L,o as u,c,a as e,t as f,u as l,b as C,F as x,l as D,w as S,m as A,v as N,e as P,g as I,h as q,p as U,q as z,s as V,x as F,y as E,z as j}from"./index-DzlCaQhd.js";import{D as G,C as K,c as T,P as B}from"./shared-Dh9W48qA.js";var O=(s=>(s[s.Album=0]="Album",s[s.EP=1]="EP",s[s["Live Album"]=2]="Live Album",s[s["Remix Album"]=3]="Remix Album",s[s.Soundtrack=4]="Soundtrack",s[s.Compilation=5]="Compilation",s[s["Demo Album"]=6]="Demo Album",s))(O||{}),t=(s=>(s[s.artist=0]="artist",s[s.name=1]="name",s[s.score=2]="score",s[s.type=3]="type",s[s.year=4]="year",s[s.genre=5]="genre",s[s.comments=6]="comments",s))(t||{});const H={class:"tw-card m-0 p-2 h-full bg-transparent flex flex-col items-center justify-center"},J={class:"overflow-hidden text-ellipsis max-w-full whitespace-nowrap"},Q={class:"flex max-w-full gap-1"},W={class:"flex-auto overflow-hidden whitespace-nowrap text-ellipsis"},X={class:"flex-none"},Z={id:"releaseModal",class:"text-neutral-300 bg-[#383838]"},R={class:"flex items-center justify-between p-4 border-b border-solid border-[#dee2e6]"},ee={class:"whitespace-nowrap"},te=["d"],se={class:"flex flex-col items-center justify-center p-4 border-b border-solid border-[#dee2e6]"},ae={class:"mb-4"},le={class:"flex justify-between p-4 items-center"},re=M({__name:"MusicRelease",props:{release:{}},setup(s){const d=y();L(async()=>{if(!d.value){console.error("Release Modal does not exist: ",d.value);return}await G([d.value]),K(d.value)});async function v(){await navigator.clipboard.writeText(` ${s.release[t.artist]} - ${s.release[t.name]}: ${s.release[t.score]}`)}return(m,p)=>(u(),c(x,null,[e("div",{class:"tw-card bg-neutral-500 text-center m-2 cursor-pointer w-80 h-24 rounded",onClick:p[0]||(p[0]=r=>d.value?.showModal())},[e("div",H,[e("div",J,f(m.release[l(t).artist]),1),e("div",Q,[e("div",W,f(m.release[l(t).name]),1),e("div",X,"("+f(m.release[l(t).score])+"/10)",1)])])]),e("dialog",{ref_key:"releaseModal",ref:d,class:"bg-transparent p-0 w-[88vw] max-w-xl"},[e("div",Z,[e("div",R,[e("h5",null,[C(f(m.release[l(t).artist])+" - "+f(m.release[l(t).name])+" ",1),e("span",ee," ( "+f(m.release[l(t).score])+"/10 ) ",1)]),(u(),c("svg",{class:"w-6 min-w-[24px] cursor-pointer",viewBox:"0 0 24 24",onClick:p[1]||(p[1]=r=>d.value?.close())},[e("path",{fill:"currentColor",d:l(T)},null,8,te)]))]),e("div",se,[e("div",ae,"Genres: "+f(m.release[l(t).genre]),1),m.release.length===7?(u(),c(x,{key:0},[C(f(m.release[l(t).comments]),1)],64)):(u(),c(x,{key:1},[C("No comments for this release.")],64))]),e("div",le,[C(" ("+f(m.release[l(t).year])+" "+f(m.release[l(t).type])+") ",1),e("div",null,[e("button",{class:"tw-button mr-2",onClick:v},"Copy"),e("button",{type:"button",class:"tw-button",onClick:p[2]||(p[2]=r=>d.value?.close())}," Close ")])])])],512)],64))}}),oe={id:"searchContent",class:"w-full flex flex-col gap-2"},ne={class:"tw-select-container"},ue=["value"],ie=["value"],ce=["value"],ve=["value"],de=["value"],me=["value"],pe={class:"tw-select-container"},fe=["value"],he=["value"],be=["value"],ye=["value"],we=["value"],ge=["value"],_e={class:"tw-select-container"},ke={class:"mt-2 flex justify-center"},Se={key:0,class:"flex flex-col"},xe={class:"mb-1"},$e={key:1},Ce=["value"],Ae={key:2,class:"flex flex-col"},qe={for:"customRange1",class:"form-label"},Me=["placeholder","min","max"],Ye=["disabled"],De={key:0,ref:"releases",class:"m-2 mt-4 mb-2 flex flex-wrap justify-center"},Ne={key:1},Pe=M({__name:"Search",props:{search:{}},setup(s){const d=U(),v=z(),m=Object.keys(O).filter(i=>Number.isNaN(Number(i))),p=y([[""]]),r=y(t.artist),_=y(!1),$=y(!1),o=y("Daft Punk"),w=y(t.score),g=y(!0);D(r,async()=>{switch(r.value){case t.score:o.value="7";break;case t.type:o.value="Live Album";break;case t.year:o.value=String(s.search.currentYear);break;default:o.value=""}await d.replace({query:{tab:"Search",term:o.value,type:t[r.value]}})}),D(w,()=>{switch(w.value){case t.score:case t.year:g.value=!0;break;default:g.value=!1;break}k()}),D(g,()=>k()),L(()=>{if(v.query.term){o.value=v.query.term,r.value=t[v.query.type];const i=setInterval(()=>async()=>{s.search.initializing||(await b(),clearInterval(i))},250)}else v.query.type&&(r.value=t[v.query.type])});async function b(){_.value=!1,$.value=!1,o.value=o.value.trim();let i=!1;switch(r.value){case t.score:i=!0;break;case t.type:i=!0;break;case t.year:i=!0;break}p.value=h(r.value,i),k(),p.value.length>0?_.value=!0:$.value=!0,await d.replace({query:{tab:"Search",term:o.value,type:t[r.value]}})}function h(i,a){return s.search.releasesArray.filter(n=>a?n[i].toLowerCase()===o.value.toLowerCase():n[i].toLowerCase().includes(o.value.toLowerCase()))}function k(){if(g.value){p.value.sort((i,a)=>a[w.value]-i[w.value]);return}p.value.sort((i,a)=>i[w.value]-a[w.value])}return(i,a)=>(u(),c("div",oe,[e("div",ne,[a[7]||(a[7]=e("h3",{class:"tw-music-search-label"},"Search by",-1)),S(e("select",{"onUpdate:modelValue":a[0]||(a[0]=n=>r.value=n),class:"tw-music-select"},[e("option",{value:l(t).artist},"Artist",8,ue),e("option",{value:l(t).name},"Release Name",8,ie),e("option",{value:l(t).score},"Score",8,ce),e("option",{value:l(t).type},"Type",8,ve),e("option",{value:l(t).year},"Year",8,de),e("option",{value:l(t).genre},"Genre",8,me)],512),[[A,r.value]])]),e("div",pe,[a[8]||(a[8]=e("h3",{class:"tw-music-search-label"},"Sort by",-1)),S(e("select",{"onUpdate:modelValue":a[1]||(a[1]=n=>w.value=n),class:"tw-music-select"},[e("option",{value:l(t).artist},"Artist",8,fe),e("option",{value:l(t).name},"Release Name",8,he),e("option",{value:l(t).score},"Score",8,be),e("option",{value:l(t).type},"Type",8,ye),e("option",{value:l(t).year},"Year",8,we),e("option",{value:l(t).genre},"Genre",8,ge)],512),[[A,w.value]])]),e("div",_e,[a[10]||(a[10]=e("h3",{class:"tw-music-search-label"},"Order",-1)),S(e("select",{"onUpdate:modelValue":a[2]||(a[2]=n=>g.value=n),class:"tw-music-select"},a[9]||(a[9]=[e("option",{value:!0},"Ascending",-1),e("option",{value:!1},"Descending",-1)]),512),[[A,g.value]])]),e("div",ke,[r.value===l(t).score?(u(),c("div",Se,[e("div",xe,f(o.value),1),S(e("input",{"onUpdate:modelValue":a[3]||(a[3]=n=>o.value=n),placeholder:"10",type:"range",class:"w-64 bg-transparent h-2",min:"0",max:"10",step:"0.5"},null,512),[[N,o.value]])])):r.value===l(t).type?(u(),c("div",$e,[S(e("select",{"onUpdate:modelValue":a[4]||(a[4]=n=>o.value=n),class:"text-black pl-4 py-2 rounded w-64"},[(u(!0),c(x,null,P(l(m),(n,Y)=>(u(),c("option",{key:Y,value:n},f(n),9,Ce))),128))],512),[[A,o.value]])])):r.value===l(t).year?(u(),c("div",Ae,[e("label",qe,f(o.value),1),S(e("input",{"onUpdate:modelValue":a[5]||(a[5]=n=>o.value=n),placeholder:String(i.search.currentYear),type:"range",class:"w-64 bg-transparent h-2",min:i.search.earliestYear,max:i.search.currentYear,step:"1"},null,8,Me),[[N,o.value]])])):S((u(),c("input",{key:3,"onUpdate:modelValue":a[6]||(a[6]=n=>o.value=n),class:"w-64 py-2 px-3 text-black rounded",placeholder:"Search input",onKeyup:I(b,["enter"])},null,544)),[[N,o.value]]),e("button",{disabled:i.search.initializing||o.value.length<1,class:"ml-4 tw-button",onClick:b}," Search ",8,Ye)]),_.value?(u(),c("div",De,[(u(!0),c(x,null,P(p.value,(n,Y)=>(u(),V(re,{key:Y,release:n},null,8,["release"]))),128))],512)):q("",!0),$.value?(u(),c("div",Ne,"No results from your search.")):q("",!0)]))}}),Ve={id:"statsContent",class:"w-full flex justify-center"},je={class:"table-auto text-white w-96 border-collapse bg-[#212529]"},Be={key:0},Le={key:1},Ue=M({__name:"Stats",props:{stats:{}},setup(s){return(d,v)=>(u(),c("div",Ve,[e("table",je,[v[4]||(v[4]=e("thead",{class:"border-solid p-2"},[e("tr",null,[e("th",null,"Stat"),e("th",null,"Value")])],-1)),e("tbody",null,[e("tr",null,[v[0]||(v[0]=e("th",null,"Number of releases",-1)),e("td",null,f(d.stats.numberOfReleases),1)]),e("tr",null,[v[1]||(v[1]=e("th",null,"Number of artists",-1)),e("td",null,f(d.stats.numberOfArtists),1)]),e("tr",null,[v[2]||(v[2]=e("th",null,"Average Year",-1)),e("td",null,f(d.stats.averageYear),1)]),e("tr",null,[v[3]||(v[3]=e("th",null,"Average Score",-1)),e("td",null,f(d.stats.averageScore),1)]),(u(!0),c(x,null,P(d.stats.releasesPerYear,(m,p)=>(u(),c("tr",{key:p},[p>0?(u(),c("th",Be," Releases in the "+f(`${1950+p*10}s`),1)):(u(),c("th",Le,"Releases before 1960")),e("td",null,f(m),1)]))),128))])])]))}}),ze=F(Ue,[["__scopeId","data-v-1c2f6801"]]),Oe={class:"tw-flex-col-center gap-4"},Ee=M({__name:"Music",setup(s){const d=z(),v=U(),m=y(!0),p=y([[""]]),r=y("Search"),_=y();E(async()=>{const b=d.query.tab;b==="Stats"?w(b):await g("Search");let h=0;async function k(){h>2&&console.error("Can't get the data :(");const i=await Promise.all([$(),o()]),a=i[0],n=i[1];a&&n?(p.value=a,_.value=n,m.value=!1):setTimeout(()=>async()=>{await k(),h++},5e3)}await k()});async function $(){return await B("https://api.danielturcich.com/Releases")}async function o(){return await B("https://api.danielturcich.com/Stats")}function w(b){r.value=b}async function g(b){const h={query:{tab:b}};b==="Search"&&(h.query.type="artist"),await v.replace(h),w(b)}return(b,h)=>(u(),c("div",Oe,[h[2]||(h[2]=e("h1",{class:"mt-4 text-2xl font-semibold"},"My Music Page",-1)),e("div",null,[e("button",{class:j(["tw-tab-button",{"bg-white":r.value==="Search","text-neutral-600":r.value==="Search"}]),type:"button",onClick:h[0]||(h[0]=k=>g("Search"))}," Search ",2),e("button",{class:j(["tw-tab-button",{"bg-white":r.value==="Stats","text-neutral-600":r.value==="Stats"}]),type:"button",onClick:h[1]||(h[1]=k=>g("Stats"))}," Stats ",2)]),m.value?q("",!0):(u(),c(x,{key:0},[r.value==="Search"?(u(),V(Pe,{key:0,search:{currentYear:_.value.currentYear,earliestYear:_.value.earliestYear,releasesArray:p.value,initializing:m.value}},null,8,["search"])):r.value==="Stats"?(u(),V(ze,{key:1,stats:_.value},null,8,["stats"])):q("",!0)],64))]))}});export{Ee as default};
//# sourceMappingURL=Music-DG4k_L6C.js.map
