import{d as M,r as x,f as z,o as n,c,a as e,t as m,u as t,b as _,F as A,l as j,w as C,m as N,v as V,e as L,g as G,h as R,p as O,q as T,s as P,x as I,y as E,z as U}from"./index-gN_Ubj-p.js";import{D as B,C as F,c as K,P as D}from"./shared-BvGcyLlD.js";var b,h,$=((b=$||{})[b.Album=0]="Album",b[b.EP=1]="EP",b[b["Live Album"]=2]="Live Album",b[b["Remix Album"]=3]="Remix Album",b[b.Soundtrack=4]="Soundtrack",b[b.Compilation=5]="Compilation",b[b["Demo Album"]=6]="Demo Album",b),a=((h=a||{})[h.artist=0]="artist",h[h.name=1]="name",h[h.score=2]="score",h[h.type=3]="type",h[h.year=4]="year",h[h.genre=5]="genre",h[h.comments=6]="comments",h);let H={class:"tw-card m-0 p-2 h-full bg-transparent flex flex-col items-center justify-center"},J={class:"overflow-hidden text-ellipsis max-w-full whitespace-nowrap"},Q={class:"flex max-w-full gap-1"},W={class:"flex-auto overflow-hidden whitespace-nowrap text-ellipsis"},X={class:"flex-none"},Z={id:"releaseModal",class:"text-neutral-300 bg-[#383838]"},ee={class:"flex items-center justify-between p-4 border-b border-solid border-[#dee2e6]"},ae={class:"whitespace-nowrap"},le=["d"],te={class:"flex flex-col items-center justify-center p-4 border-b border-solid border-[#dee2e6]"},se={class:"mb-4"},re={class:"flex justify-between p-4 items-center"},ue=M({__name:"MusicRelease",props:{release:{}},setup(g){let i=x();async function o(){await navigator.clipboard.writeText(` ${g.release[a.artist]} - ${g.release[a.name]}: ${g.release[a.score]}`)}return z(async()=>{if(!i.value){console.error("Release Modal does not exist: ",i.value);return}await B([i.value]),F(i.value)}),(v,p)=>(n(),c(A,null,[e("div",{class:"tw-card bg-neutral-500 text-center m-2 cursor-pointer w-80 h-24 rounded",onClick:p[0]||(p[0]=s=>i.value?.showModal())},[e("div",H,[e("div",J,m(v.release[t(a).artist]),1),e("div",Q,[e("div",W,m(v.release[t(a).name]),1),e("div",X,"("+m(v.release[t(a).score])+"/10)",1)])])]),e("dialog",{ref_key:"releaseModal",ref:i,class:"bg-transparent p-0 w-[88vw] max-w-xl"},[e("div",Z,[e("div",ee,[e("h5",null,[_(m(v.release[t(a).artist])+" - "+m(v.release[t(a).name])+" ",1),e("span",ae," ( "+m(v.release[t(a).score])+"/10 ) ",1)]),(n(),c("svg",{class:"w-6 min-w-[24px] cursor-pointer",viewBox:"0 0 24 24",onClick:p[1]||(p[1]=s=>i.value?.close())},[e("path",{fill:"currentColor",d:t(K)},null,8,le)]))]),e("div",te,[e("div",se,"Genres: "+m(v.release[t(a).genre]),1),v.release.length===7?(n(),c(A,{key:0},[_(m(v.release[t(a).comments]),1)],64)):(n(),c(A,{key:1},[_("No comments for this release.")],64))]),e("div",re,[_(" ("+m(v.release[t(a).year])+" "+m(v.release[t(a).type])+") ",1),e("div",null,[e("button",{class:"tw-button mr-2",onClick:o},"Copy"),e("button",{type:"button",class:"tw-button",onClick:p[2]||(p[2]=s=>i.value?.close())}," Close ")])])])],512)],64))}}),ne={id:"searchContent",class:"w-full flex flex-col gap-2"},ce={class:"tw-select-container"},oe=["value"],ie=["value"],ve=["value"],pe=["value"],de=["value"],me=["value"],ye={class:"tw-select-container"},be=["value"],he=["value"],we=["value"],fe=["value"],xe=["value"],ge=["value"],ke={class:"tw-select-container"},Se={class:"mt-2 flex justify-center"},Ce={key:0,class:"flex flex-col"},Ae={class:"mb-1"},Ye={key:1},qe=["value"],_e={key:2,class:"flex flex-col"},Ne={for:"customRange1",class:"form-label"},Re=["placeholder","min","max"],Me=["disabled"],je={key:0,ref:"releases",class:"m-2 mt-4 mb-2 flex flex-wrap justify-center"},Ve={key:1},Le=M({__name:"Search",props:{search:{}},setup(g){let i=O(),o=T(),v=Object.keys($).filter(d=>Number.isNaN(Number(d))),p=x([[""]]),s=x(a.artist),k=x(!1),q=x(!1),r=x("Daft Punk"),f=x(a.score),w=x(!0);async function y(){var d,l;k.value=!1,q.value=!1,r.value=r.value.trim();let u=!1;switch(s.value){case a.score:case a.type:case a.year:u=!0}p.value=(d=s.value,l=u,g.search.releasesArray.filter(Y=>l?Y[d].toLowerCase()===r.value.toLowerCase():Y[d].toLowerCase().includes(r.value.toLowerCase()))),S(),p.value.length>0?k.value=!0:q.value=!0,await i.replace({query:{tab:"Search",term:r.value,type:a[s.value]}})}function S(){if(w.value){p.value.sort((d,l)=>l[f.value]-d[f.value]);return}p.value.sort((d,l)=>d[f.value]-l[f.value])}return j(s,async()=>{switch(s.value){case a.score:r.value="7";break;case a.type:r.value="Live Album";break;case a.year:r.value=String(g.search.currentYear);break;default:r.value=""}await i.replace({query:{tab:"Search",term:r.value,type:a[s.value]}})}),j(f,()=>{switch(f.value){case a.score:case a.year:w.value=!0;break;default:w.value=!1}S()}),j(w,()=>S()),z(()=>{if(o.query.term){r.value=o.query.term,s.value=a[o.query.type];let d=setInterval(()=>async()=>{g.search.initializing||(await y(),clearInterval(d))},250)}else o.query.type&&(s.value=a[o.query.type])}),(d,l)=>(n(),c("div",ne,[e("div",ce,[l[7]||(l[7]=e("h3",{class:"tw-music-search-label"},"Search by",-1)),C(e("select",{"onUpdate:modelValue":l[0]||(l[0]=u=>s.value=u),class:"tw-music-select"},[e("option",{value:t(a).artist},"Artist",8,oe),e("option",{value:t(a).name},"Release Name",8,ie),e("option",{value:t(a).score},"Score",8,ve),e("option",{value:t(a).type},"Type",8,pe),e("option",{value:t(a).year},"Year",8,de),e("option",{value:t(a).genre},"Genre",8,me)],512),[[N,s.value]])]),e("div",ye,[l[8]||(l[8]=e("h3",{class:"tw-music-search-label"},"Sort by",-1)),C(e("select",{"onUpdate:modelValue":l[1]||(l[1]=u=>f.value=u),class:"tw-music-select"},[e("option",{value:t(a).artist},"Artist",8,be),e("option",{value:t(a).name},"Release Name",8,he),e("option",{value:t(a).score},"Score",8,we),e("option",{value:t(a).type},"Type",8,fe),e("option",{value:t(a).year},"Year",8,xe),e("option",{value:t(a).genre},"Genre",8,ge)],512),[[N,f.value]])]),e("div",ke,[l[10]||(l[10]=e("h3",{class:"tw-music-search-label"},"Order",-1)),C(e("select",{"onUpdate:modelValue":l[2]||(l[2]=u=>w.value=u),class:"tw-music-select"},l[9]||(l[9]=[e("option",{value:!0},"Ascending",-1),e("option",{value:!1},"Descending",-1)]),512),[[N,w.value]])]),e("div",Se,[s.value===t(a).score?(n(),c("div",Ce,[e("div",Ae,m(r.value),1),C(e("input",{"onUpdate:modelValue":l[3]||(l[3]=u=>r.value=u),placeholder:"10",type:"range",class:"w-64 bg-transparent h-2",min:"0",max:"10",step:"0.5"},null,512),[[V,r.value]])])):s.value===t(a).type?(n(),c("div",Ye,[C(e("select",{"onUpdate:modelValue":l[4]||(l[4]=u=>r.value=u),class:"text-black pl-4 py-2 rounded w-64"},[(n(!0),c(A,null,L(t(v),(u,Y)=>(n(),c("option",{key:Y,value:u},m(u),9,qe))),128))],512),[[N,r.value]])])):s.value===t(a).year?(n(),c("div",_e,[e("label",Ne,m(r.value),1),C(e("input",{"onUpdate:modelValue":l[5]||(l[5]=u=>r.value=u),placeholder:String(d.search.currentYear),type:"range",class:"w-64 bg-transparent h-2",min:d.search.earliestYear,max:d.search.currentYear,step:"1"},null,8,Re),[[V,r.value]])])):C((n(),c("input",{key:3,"onUpdate:modelValue":l[6]||(l[6]=u=>r.value=u),class:"w-64 py-2 px-3 text-black rounded",placeholder:"Search input",onKeyup:G(y,["enter"])},null,544)),[[V,r.value]]),e("button",{disabled:d.search.initializing||r.value.length<1,class:"ml-4 tw-button",onClick:y}," Search ",8,Me)]),k.value?(n(),c("div",je,[(n(!0),c(A,null,L(p.value,(u,Y)=>(n(),P(ue,{key:Y,release:u},null,8,["release"]))),128))],512)):R("",!0),q.value?(n(),c("div",Ve,"No results from your search.")):R("",!0)]))}}),Pe={id:"statsContent",class:"w-full flex justify-center"},Ue={class:"table-auto text-white w-96 border-collapse bg-[#212529]"},De={key:0},ze={key:1},Oe=I(M({__name:"Stats",props:{stats:{}},setup:g=>(i,o)=>(n(),c("div",Pe,[e("table",Ue,[o[4]||(o[4]=e("thead",{class:"border-solid p-2"},[e("tr",null,[e("th",null,"Stat"),e("th",null,"Value")])],-1)),e("tbody",null,[e("tr",null,[o[0]||(o[0]=e("th",null,"Number of releases",-1)),e("td",null,m(i.stats.numberOfReleases),1)]),e("tr",null,[o[1]||(o[1]=e("th",null,"Number of artists",-1)),e("td",null,m(i.stats.numberOfArtists),1)]),e("tr",null,[o[2]||(o[2]=e("th",null,"Average Year",-1)),e("td",null,m(i.stats.averageYear),1)]),e("tr",null,[o[3]||(o[3]=e("th",null,"Average Score",-1)),e("td",null,m(i.stats.averageScore),1)]),(n(!0),c(A,null,L(i.stats.releasesPerYear,(v,p)=>(n(),c("tr",{key:p},[p>0?(n(),c("th",De," Releases in the "+m(`${1950+10*p}s`),1)):(n(),c("th",ze,"Releases before 1960")),e("td",null,m(v),1)]))),128))])])]))}),[["__scopeId","data-v-1c356e74"]]),Te={class:"tw-flex-col-center gap-4"},Ie=M({__name:"Music",setup(g){let i=T(),o=O(),v=x(!0),p=x([[""]]),s=x("Search"),k=x();async function q(){return await D("https://api.danielturcich.com/Releases")}async function r(){return await D("https://api.danielturcich.com/Stats")}async function f(w){let y={query:{tab:w}};w==="Search"&&(y.query.type="artist"),await o.replace(y),s.value=w}return E(async()=>{let w=i.query.tab;w==="Stats"?s.value=w:await f("Search");let y=0;async function S(){y>2&&console.error("Can't get the data :(");let d=await Promise.all([q(),r()]),l=d[0],u=d[1];l&&u?(p.value=l,k.value=u,v.value=!1):setTimeout(()=>async()=>{await S(),y++},5e3)}await S()}),(w,y)=>(n(),c("div",Te,[y[2]||(y[2]=e("h1",{class:"mt-4 text-2xl font-semibold"},"My Music Page",-1)),e("div",null,[e("button",{class:U(["tw-tab-button",{"bg-white":s.value==="Search","text-neutral-600":s.value==="Search"}]),type:"button",onClick:y[0]||(y[0]=S=>f("Search"))}," Search ",2),e("button",{class:U(["tw-tab-button",{"bg-white":s.value==="Stats","text-neutral-600":s.value==="Stats"}]),type:"button",onClick:y[1]||(y[1]=S=>f("Stats"))}," Stats ",2)]),v.value?R("",!0):(n(),c(A,{key:0},[s.value==="Search"?(n(),P(Le,{key:0,search:{currentYear:k.value.currentYear,earliestYear:k.value.earliestYear,releasesArray:p.value,initializing:v.value}},null,8,["search"])):s.value==="Stats"?(n(),P(Oe,{key:1,stats:k.value},null,8,["stats"])):R("",!0)],64))]))}});export{Ie as default};
