import{d as q,r as y,f as I,o as u,c as v,a as e,t as d,u as c,e as $,F as b,m as P,n as V,k as N,w as x,p as z,v as M,g as L,b as B,h as C,q as Y,s as F,x as O,y as U,z as K,A as j}from"./index-1d3571a3.js";import{D as G,C as R,c as E,P as D}from"./shared-6a88db0b.js";var t=(s=>(s[s.artist=0]="artist",s[s.name=1]="name",s[s.score=2]="score",s[s.type=3]="type",s[s.year=4]="year",s[s.range=5]="range",s[s.genre=6]="genre",s[s.comments=7]="comments",s))(t||{});const H={class:"tw-card m-0 p-2 h-full bg-transparent flex flex-col items-center justify-center"},J={class:"overflow-hidden text-ellipsis max-w-full whitespace-nowrap"},Q={class:"flex max-w-full gap-1"},W={class:"flex-auto overflow-hidden whitespace-nowrap text-ellipsis"},X={class:"flex-none"},Z={id:"releaseModal",class:"text-neutral-300 bg-[#383838]"},ee={class:"flex items-center justify-between p-4 border-b border-solid border-[#dee2e6]"},te={class:"whitespace-nowrap"},se=["d"],ae={class:"flex flex-col items-center justify-center p-4 border-b border-solid border-[#dee2e6]"},le={class:"mb-4"},re={class:"flex justify-between p-4 items-center"},oe=q({__name:"MusicRelease",props:{release:{}},setup(s){const i=y();I(async()=>{if(!i.value){console.error("Release Modal does not exist: ",i.value);return}await G([i.value]),R(i.value)});async function f(){await navigator.clipboard.writeText(` ${s.release[t.artist]} - ${s.release[t.name]}: ${s.release[t.score]}`)}return(r,h)=>(u(),v(b,null,[e("div",{class:"tw-card bg-neutral-500 text-center m-2 cursor-pointer w-80 h-24 rounded",onClick:h[0]||(h[0]=l=>i.value?.showModal())},[e("div",H,[e("div",J,d(r.release[c(t).artist]),1),e("div",Q,[e("div",W,d(r.release[c(t).name]),1),e("div",X,"("+d(r.release[c(t).score])+"/10)",1)])])]),e("dialog",{ref_key:"releaseModal",ref:i,class:"bg-transparent p-0 w-[88vw] max-w-xl"},[e("div",Z,[e("div",ee,[e("h5",null,[$(d(r.release[c(t).artist])+" - "+d(r.release[c(t).name])+" ",1),e("span",te," ( "+d(r.release[c(t).score])+"/10 ) ",1)]),(u(),v("svg",{class:"w-6 min-w-[24px] cursor-pointer",viewBox:"0 0 24 24",onClick:h[1]||(h[1]=l=>i.value?.close())},[e("path",{fill:"currentColor",d:c(E)},null,8,se)]))]),e("div",ae,[e("div",le,"Genres: "+d(r.release[c(t).genre]),1),r.release.length===7?(u(),v(b,{key:0},[$(d(r.release[c(t).comments]),1)],64)):(u(),v(b,{key:1},[$("No comments for this release.")],64))]),e("div",re,[$(" ("+d(r.release[c(t).year])+" "+d(r.release[c(t).type])+") ",1),e("div",null,[e("button",{class:"tw-button mr-2",onClick:f},"Copy"),e("button",{type:"button",class:"tw-button",onClick:h[2]||(h[2]=l=>i.value?.close())}," Close ")])])])],512)],64))}}),ne={id:"searchContent",class:"w-full"},ue=e("h3",{class:"mb-2"},"Search by:",-1),ie=["value"],ce=["value"],de=["value"],ve=["value"],he=["value"],pe={class:"m-4 flex justify-center"},fe={key:0,class:"flex flex-col"},ye={class:"mb-1"},me={key:1,class:"flex flex-col"},_e={for:"customRange1",class:"form-label"},be=["placeholder","min","max"],we=["onKeyup"],ge=["disabled"],Se={key:0,ref:"releases",class:"m-2 mt-4 mb-2 flex flex-wrap justify-center"},ke={key:1},$e=q({__name:"Search",props:{search:{}},setup(s){const i=P(),f=V();let r=!0;const h=y([[""]]),l=y(t.artist),m=y(!1),w=y(!1),o=y("");N(l,async()=>{if(!(r&&f.query.term)){switch(l.value){case t.score:o.value="7";break;case t.type:o.value="Album";break;case t.year:o.value=String(s.search.currentYear);break;default:o.value=""}await i.replace({query:{tab:"Search",term:o.value,type:t[l.value]}})}}),I(()=>{if(f.query.term){o.value=f.query.term,l.value=t[f.query.type];const a=setInterval(()=>async()=>{s.search.initializing||(await _(),clearInterval(a),r=!1)},250)}else f.query.type&&(l.value=t[f.query.type]),r=!1});async function _(){m.value=!1,w.value=!1,o.value=o.value.trim();let a=!1;switch(l.value){case t.score:a=!0;break;case t.type:a=!0;break;case t.year:a=!0;break}h.value=g(l.value,a),h.value.length>0?m.value=!0:w.value=!0,await i.replace({query:{tab:"Search",term:o.value,type:t[l.value]}})}function g(a,n){return s.search.releasesArray.filter(p=>n?p[a].toLowerCase()===o.value.toLowerCase():p[a].toLowerCase().includes(o.value.toLowerCase()))}return(a,n)=>(u(),v("div",ne,[ue,x(e("select",{"onUpdate:modelValue":n[0]||(n[0]=p=>l.value=p),class:"text-black pl-4 py-2 rounded w-72"},[e("option",{selected:"",value:c(t).artist},"Artist",8,ie),e("option",{value:c(t).name},"Release Name",8,ce),e("option",{value:c(t).score},"Score",8,de),e("option",{value:c(t).year},"Year",8,ve),e("option",{value:c(t).genre},"Genre",8,he)],512),[[z,l.value]]),e("div",pe,[l.value===c(t).score?(u(),v("div",fe,[e("div",ye,d(o.value),1),x(e("input",{"onUpdate:modelValue":n[1]||(n[1]=p=>o.value=p),placeholder:"10",type:"range",class:"w-64 bg-transparent h-2",min:"0",max:"10",step:"0.5"},null,512),[[M,o.value]])])):l.value===c(t).year?(u(),v("div",me,[e("label",_e,d(o.value),1),x(e("input",{"onUpdate:modelValue":n[2]||(n[2]=p=>o.value=p),placeholder:String(a.search.currentYear),type:"range",class:"w-64 bg-transparent h-2",min:a.search.earliestYear,max:a.search.currentYear,step:"1"},null,8,be),[[M,o.value]])])):x((u(),v("input",{key:2,"onUpdate:modelValue":n[3]||(n[3]=p=>o.value=p),class:"w-64 py-2 px-3 text-black rounded",placeholder:"Search input",onKeyup:L(_,["enter"])},null,40,we)),[[M,o.value]]),e("button",{disabled:a.search.initializing||o.value.length<1,class:"ml-4 tw-button",onClick:_}," Search ",8,ge)]),m.value?(u(),v("div",Se,[(u(!0),v(b,null,B(h.value,(p,S)=>(u(),Y(oe,{key:S,index:S,release:p},null,8,["index","release"]))),128))],512)):C("",!0),w.value?(u(),v("div",ke,"No results from your search.")):C("",!0)]))}}),k=s=>(F("data-v-1c2f6801"),s=s(),O(),s),xe={id:"statsContent",class:"w-full flex justify-center"},Ce={class:"table-auto text-white w-96 border-collapse bg-[#212529]"},qe=k(()=>e("thead",{class:"border-solid p-2"},[e("tr",null,[e("th",null,"Stat"),e("th",null,"Value")])],-1)),Me=k(()=>e("th",null,"Number of releases",-1)),Ye=k(()=>e("th",null,"Number of artists",-1)),Te=k(()=>e("th",null,"Average Year",-1)),Ae=k(()=>e("th",null,"Average Score",-1)),je={key:0},De={key:1},Ie=q({__name:"Stats",props:{stats:{}},setup(s){return(i,f)=>(u(),v("div",xe,[e("table",Ce,[qe,e("tbody",null,[e("tr",null,[Me,e("td",null,d(i.stats.numberOfReleases),1)]),e("tr",null,[Ye,e("td",null,d(i.stats.numberOfArtists),1)]),e("tr",null,[Te,e("td",null,d(i.stats.averageYear),1)]),e("tr",null,[Ae,e("td",null,d(i.stats.averageScore),1)]),(u(!0),v(b,null,B(i.stats.releasesPerYear,(r,h)=>(u(),v("tr",{key:h},[h>0?(u(),v("th",je," Releases in the "+d(`${1950+h*10}s`),1)):(u(),v("th",De,"Releases before 1960")),e("td",null,d(r),1)]))),128))])])]))}});const Pe=U(Ie,[["__scopeId","data-v-1c2f6801"]]),Ve={class:"tw-flex-col-center gap-4"},Be=e("h1",{class:"mt-4 text-2xl font-semibold"},"My Music Page",-1),Le=q({__name:"Music",setup(s){const i=V(),f=P(),r=y(!0),h=y([[""]]),l=y("Stats"),m=y();K(async()=>{const a=i.query.tab;a==="Search"?_(a):await g("Stats");let n=0;async function p(){n>2&&console.error("Can't get the data :(");const S=await Promise.all([w(),o()]),T=S[0],A=S[1];T&&A?(h.value=T,m.value=A,r.value=!1):setTimeout(()=>async()=>{await p(),n++},5e3)}await p()});async function w(){return await D("https://api.danielturcich.com/Releases")}async function o(){return await D("https://api.danielturcich.com/Stats")}function _(a){l.value=a}async function g(a){const n={query:{tab:a}};a==="Search"&&(n.query.type="artist"),await f.replace(n),_(a)}return(a,n)=>(u(),v("div",Ve,[Be,e("div",null,[e("button",{class:j(["tw-tab-button",{"bg-white":l.value==="Stats","text-neutral-600":l.value==="Stats"}]),type:"button",onClick:n[0]||(n[0]=p=>g("Stats"))}," Stats ",2),e("button",{class:j(["tw-tab-button",{"bg-white":l.value==="Search","text-neutral-600":l.value==="Search"}]),type:"button",onClick:n[1]||(n[1]=p=>g("Search"))}," Search ",2)]),r.value?C("",!0):(u(),v(b,{key:0},[l.value==="Stats"?(u(),Y(Pe,{key:0,stats:m.value},null,8,["stats"])):l.value==="Search"?(u(),Y($e,{key:1,search:{currentYear:m.value.currentYear,earliestYear:m.value.earliestYear,releasesArray:h.value,initializing:r.value}},null,8,["search"])):C("",!0)],64))]))}});export{Le as default};
//# sourceMappingURL=Music-ae824283.js.map
