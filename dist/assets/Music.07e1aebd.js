import{d as O,r as p,o as L,b as r,e as u,f as t,t as n,u as a,l as M,F as C,y as U,z as E,x as G,w as j,A as F,m as B,g as P,n as H,B as V,q as z,p as J,h as Q,C as W}from"./vendor.ff821898.js";import{d as X,c as Z}from"./dialog-polyfill.esm.c4f433fc.js";import{_ as I}from"./index.efe2a26a.js";var s=(e=>(e[e.artist=0]="artist",e[e.name=1]="name",e[e.score=2]="score",e[e.type=3]="type",e[e.year=4]="year",e[e.genre=5]="genre",e[e.comments=6]="comments",e))(s||{}),N=(e=>(e[e["1950s"]=0]="1950s",e[e["1960s"]=1]="1960s",e[e["1970s"]=2]="1970s",e[e["1980s"]=3]="1980s",e[e["1990s"]=4]="1990s",e[e["2000s"]=5]="2000s",e[e["2010s"]=6]="2010s",e[e["2020s"]=7]="2020s",e))(N||{});const R={class:"tw-card m-0 p-2 h-full bg-transparent flex flex-col items-center justify-center"},ee={class:"overflow-hidden text-ellipsis max-w-full whitespace-nowrap"},te={class:"flex max-w-full gap-1"},se={class:"flex-auto overflow-hidden whitespace-nowrap text-ellipsis"},ae={class:"flex-none"},le={id:"releaseModal",class:"text-neutral-300 bg-[#383838]"},re={class:"flex items-center justify-between p-4 border-b border-solid border-[#dee2e6]"},oe={class:"whitespace-nowrap"},ne=["d"],ue={class:"flex flex-col items-center justify-center p-4 border-b border-solid border-[#dee2e6]"},ce={class:"mb-4"},ie=M("No comments for this release."),de={class:"flex justify-between p-4 items-center"},ve=O({props:{index:null,release:null},setup(e){const f=e,m=p();L(()=>{X.registerDialog(m.value)});function i(){navigator.clipboard.writeText(` ${f.release[s.artist]} - ${f.release[s.name]}: ${f.release[s.score]}`)}function b(){m.value.showModal()}function _(){m.value.close()}return(w,c)=>(r(),u(C,null,[t("div",{class:"tw-card bg-neutral-500 text-center m-2 cursor-pointer w-80 h-24 rounded",onClick:b},[t("div",R,[t("div",ee,n(e.release[a(s).artist]),1),t("div",te,[t("div",se,n(e.release[a(s).name]),1),t("div",ae,"("+n(e.release[a(s).score])+"/10)",1)])])]),t("dialog",{ref_key:"releaseModal",ref:m,class:"bg-transparent p-0 w-[88vw]"},[t("div",le,[t("div",re,[t("h5",null,[M(n(e.release[a(s).artist])+" - "+n(e.release[a(s).name])+" ",1),t("span",oe," ( "+n(e.release[a(s).score])+"/10 ) ",1)]),(r(),u("svg",{class:"w-6 min-w-[24px] cursor-pointer",viewBox:"0 0 24 24",onClick:_},[t("path",{fill:"currentColor",d:a(Z)},null,8,ne)]))]),t("div",ue,[t("div",ce,"Genres: "+n(e.release[a(s).genre]),1),e.release.length===7?(r(),u(C,{key:0},[M(n(e.release[a(s).comments]),1)],64)):(r(),u(C,{key:1},[ie],64))]),t("div",de,[M(" ("+n(e.release[a(s).year])+" "+n(e.release[a(s).type])+") ",1),t("div",null,[t("button",{class:"tw-button mr-2",onClick:i},"Copy"),t("button",{type:"button",class:"tw-button",onClick:_}," Close ")])])])],512)],64))}}),he={id:"searchContent",class:"w-full"},fe=t("h3",{class:"mb-2"},"Search by:",-1),ye=["value"],me=["value"],pe=["value"],be=["value"],_e=["value"],we=["value"],ge={class:"m-4 flex justify-center"},xe={key:0,class:"flex flex-col"},ke={class:"mb-1"},Se={key:1},$e=["value"],Ce={key:2,class:"flex flex-col"},Ye={for:"customRange1",class:"form-label"},je=["placeholder","min","max"],Ae=["onKeyup"],qe=["disabled"],Me={key:0,ref:"releases",class:"m-2 mt-4 mb-2 flex flex-wrap justify-center"},Ne={key:1},Oe=O({props:{currentYear:null,earliestYear:null,releasesArray:null,initializing:{type:Boolean}},setup(e){const f=e,m=U(),i=E();let b=!0;const _=f.currentYear,w=p([[""]]),c=p(s.artist),k=p(!1),g=p(!1),l=p(""),Y=["Album","EP","Live Album","Soundtrack","Remix Album","Compilation","Demo Album"];G(c,()=>{if(!(b&&i.query.term)){switch(c.value){case s.score:l.value="7";break;case s.type:l.value="Album";break;case s.year:l.value=String(_);break;default:l.value=""}m.replace({query:{tab:"Search",term:l.value,type:s[c.value]}})}}),L(()=>{if(i.query.term){l.value=i.query.term,c.value=s[i.query.type];const y=setInterval(()=>{f.initializing||(x(),clearInterval(y),b=!1)},250)}else i.query.type&&(c.value=s[i.query.type])});function x(){k.value=!1,g.value=!1,l.value=l.value.trim();let y=!1;switch(c.value){case s.score:y=!0;break;case s.type:y=!0;break;case s.year:y=!0;break}w.value=q(c.value,y),w.value.length>0?k.value=!0:g.value=!0,m.replace({query:{tab:"Search",term:l.value,type:s[c.value]}})}function q(y,d){return f.releasesArray.filter(o=>d?o[y].toLowerCase()===l.value.toLowerCase():o[y].toLowerCase().includes(l.value.toLowerCase()))}return(y,d)=>(r(),u("div",he,[fe,j(t("select",{"onUpdate:modelValue":d[0]||(d[0]=o=>c.value=o),class:"text-black pl-4 py-2 rounded w-72"},[t("option",{selected:"",value:a(s).artist},"Artist",8,ye),t("option",{value:a(s).name},"Release Name",8,me),t("option",{value:a(s).score},"Score",8,pe),t("option",{value:a(s).type},"Type",8,be),t("option",{value:a(s).year},"Year",8,_e),t("option",{value:a(s).genre},"Genre",8,we)],512),[[F,c.value]]),t("div",ge,[c.value===a(s).score?(r(),u("div",xe,[t("div",ke,n(l.value),1),j(t("input",{"onUpdate:modelValue":d[1]||(d[1]=o=>l.value=o),placeholder:"10",type:"range",class:"w-64 bg-transparent h-2",min:"0",max:"10",step:"0.5"},null,512),[[B,l.value]])])):c.value===a(s).type?(r(),u("div",Se,[j(t("select",{"onUpdate:modelValue":d[2]||(d[2]=o=>l.value=o),class:"text-black pl-4 py-2 rounded w-64"},[(r(),u(C,null,P(Y,(o,S)=>t("option",{key:S,value:o},n(o),9,$e)),64))],512),[[F,l.value]])])):c.value===a(s).year?(r(),u("div",Ce,[t("label",Ye,n(l.value),1),j(t("input",{"onUpdate:modelValue":d[3]||(d[3]=o=>l.value=o),placeholder:String(a(_)),type:"range",class:"w-64 bg-transparent h-2",min:e.earliestYear,max:a(_),step:"1"},null,8,je),[[B,l.value]])])):j((r(),u("input",{key:3,"onUpdate:modelValue":d[4]||(d[4]=o=>l.value=o),class:"w-64 py-2 px-3 text-black rounded",placeholder:"Search input",onKeyup:H(x,["enter"])},null,40,Ae)),[[B,l.value]]),t("button",{disabled:e.initializing||l.value.length<1,class:"ml-4 tw-button",onClick:x}," Search ",8,qe)]),k.value?(r(),u("div",Me,[(r(!0),u(C,null,P(w.value,(o,S)=>(r(),V(ve,{key:S,index:S,release:o},null,8,["index","release"]))),128))],512)):z("",!0),g.value?(r(),u("div",Ne,"No results from your search.")):z("",!0)]))}});const A=e=>(J("data-v-5ad3b9c3"),e=e(),Q(),e),Te={id:"statsContent",class:"w-full flex justify-center"},Be={class:"table-auto text-white w-96 border-collapse bg-[#212529]"},Pe=A(()=>t("thead",{class:"border-solid p-2"},[t("tr",null,[t("th",null,"Stat"),t("th",null,"Value")])],-1)),Ve=A(()=>t("th",null,"Number of releases",-1)),ze=A(()=>t("th",null,"Number of artists",-1)),De=A(()=>t("th",null,"Average Year",-1)),Fe=A(()=>t("th",null,"Average Score",-1)),Le={key:0},Ue={key:1},Ee=O({props:{statsObject:null},setup(e){return(f,m)=>(r(),u("div",Te,[t("table",Be,[Pe,t("tbody",null,[t("tr",null,[Ve,t("td",null,n(e.statsObject.numberOfReleases),1)]),t("tr",null,[ze,t("td",null,n(e.statsObject.numberOfArtists),1)]),t("tr",null,[De,t("td",null,n(e.statsObject.averageYear),1)]),t("tr",null,[Fe,t("td",null,n(e.statsObject.averageScore),1)]),(r(!0),u(C,null,P(e.statsObject.releasesPerYear,(i,b)=>(r(),u("tr",{key:b},[b>0?(r(),u("th",Le," Releases in the "+n(`${1950+b*10}s`),1)):(r(),u("th",Ue,"Releases before 1960")),t("td",null,n(i),1)]))),128))])])]))}}),Ke=I(Ee,[["__scopeId","data-v-5ad3b9c3"]]),Ge={class:"tw-flex-col-center gap-4"},He=t("h1",{class:"mt-4 text-2xl font-semibold"},"My Music Page",-1),Xe=O({setup(e){const f="loading...",m=new Date().getFullYear(),i=[],b=U(),_=E();for(let h=0;h<N["2020s"]+1;h++)i.push(0);const w=p("Stats"),c=p([[""]]),k=p(!0),g=p(m),l=p({numberOfReleases:f,averageYear:f,averageScore:f,numberOfArtists:f,releasesPerYear:i}),Y=[];let x=0,q=0,y=0,d=0,o=0;W(async()=>{const h=_.query.tab;h==="Search"?D(h):T("Stats"),c.value=await S(),k.value=!1,c.value.forEach(v=>{Y.includes(v[s.artist])||Y.push(v[s.artist]);const $=Number(v[s.year]);$<g.value&&(g.value=$),o+=$,y++,K(v[s.score])?(d+=Number(v[s.score]),x++):v[s.score]=="?"&&q++,$>1959?i[N[v[s.year].slice(0,3)+"0s"]]++:i[N["1950s"]]++}),l.value={averageScore:(d/x).toFixed(2),numberOfArtists:Y.length,averageYear:(o/y).toFixed(2),numberOfReleases:x+q,releasesPerYear:i}});async function S(){return(await fetch("https://api.danielturcich.com/Releases")).json()}function K(h){return!isNaN(Number(h))}function D(h){w.value=h}function T(h){const v={query:{tab:h}};h==="Search"&&(v.query.type="artist"),b.replace(v),D(h)}return(h,v)=>(r(),u("div",Ge,[He,t("div",null,[t("button",{class:"tw-tab-button",type:"button",onClick:v[0]||(v[0]=$=>T("Stats"))}," Stats "),t("button",{class:"tw-tab-button",type:"button",onClick:v[1]||(v[1]=$=>T("Search"))}," Search ")]),a(w)==="Stats"?(r(),V(Ke,{key:0,"stats-object":a(l)},null,8,["stats-object"])):a(w)==="Search"?(r(),V(Oe,{key:1,"current-year":a(m),"earliest-year":g.value,"releases-array":c.value,initializing:k.value},null,8,["current-year","earliest-year","releases-array","initializing"])):z("",!0)]))}});export{Xe as default};
