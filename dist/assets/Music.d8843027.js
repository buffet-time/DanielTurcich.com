import{d as q,r as _,o as A,b as r,e as n,f as e,t as o,u as a,l as C,F as x,y as B,z as O,x as z,w as $,A as I,m as M,n as N,g as V,B as T,q as j,p as P,h as L,C as D}from"./vendor.3c7c0a4b.js";import{d as U,c as F}from"./dialog-polyfill.esm.c4f433fc.js";import{_ as K}from"./index.4c3080bb.js";var s=(t=>(t[t.artist=0]="artist",t[t.name=1]="name",t[t.score=2]="score",t[t.type=3]="type",t[t.year=4]="year",t[t.genre=5]="genre",t[t.comments=6]="comments",t))(s||{});const E={class:"tw-card m-0 p-2 h-full bg-transparent flex flex-col items-center justify-center"},G={class:"overflow-hidden text-ellipsis max-w-full whitespace-nowrap"},R={class:"flex max-w-full gap-1"},H={class:"flex-auto overflow-hidden whitespace-nowrap text-ellipsis"},J={class:"flex-none"},Q={id:"releaseModal",class:"text-neutral-300 bg-[#383838]"},W={class:"flex items-center justify-between p-4 border-b border-solid border-[#dee2e6]"},X={class:"whitespace-nowrap"},Z=["d"],ee={class:"flex flex-col items-center justify-center p-4 border-b border-solid border-[#dee2e6]"},te={class:"mb-4"},se=C("No comments for this release."),ae={class:"flex justify-between p-4 items-center"},le=q({props:{index:null,release:null},setup(t){const p=t,b=_();A(()=>{typeof HTMLDialogElement!="function"&&U.registerDialog(b.value)});function u(){navigator.clipboard.writeText(` ${p.release[s.artist]} - ${p.release[s.name]}: ${p.release[s.score]}`)}function d(){b.value.showModal()}function y(){b.value.close()}return(w,c)=>(r(),n(x,null,[e("div",{class:"tw-card bg-neutral-500 text-center m-2 cursor-pointer w-80 h-24 rounded",onClick:d},[e("div",E,[e("div",G,o(t.release[a(s).artist]),1),e("div",R,[e("div",H,o(t.release[a(s).name]),1),e("div",J,"("+o(t.release[a(s).score])+"/10)",1)])])]),e("dialog",{ref_key:"releaseModal",ref:b,class:"bg-transparent p-0 w-[88vw]"},[e("div",Q,[e("div",W,[e("h5",null,[C(o(t.release[a(s).artist])+" - "+o(t.release[a(s).name])+" ",1),e("span",X," ( "+o(t.release[a(s).score])+"/10 ) ",1)]),(r(),n("svg",{class:"w-6 min-w-[24px] cursor-pointer",viewBox:"0 0 24 24",onClick:y},[e("path",{fill:"currentColor",d:a(F)},null,8,Z)]))]),e("div",ee,[e("div",te,"Genres: "+o(t.release[a(s).genre]),1),t.release.length===7?(r(),n(x,{key:0},[C(o(t.release[a(s).comments]),1)],64)):(r(),n(x,{key:1},[se],64))]),e("div",ae,[C(" ("+o(t.release[a(s).year])+" "+o(t.release[a(s).type])+") ",1),e("div",null,[e("button",{class:"tw-button mr-2",onClick:u},"Copy"),e("button",{type:"button",class:"tw-button",onClick:y}," Close ")])])])],512)],64))}}),re={id:"searchContent",class:"w-full"},oe=e("h3",{class:"mb-2"},"Search by:",-1),ne=["value"],ce=["value"],ue=["value"],ie=["value"],de=["value"],ve={class:"m-4 flex justify-center"},he={key:0,class:"flex flex-col"},fe={class:"mb-1"},ye={key:1,class:"flex flex-col"},pe={for:"customRange1",class:"form-label"},be=["placeholder","min","max"],me=["onKeyup"],_e=["disabled"],we={key:0,ref:"releases",class:"m-2 mt-4 mb-2 flex flex-wrap justify-center"},ge={key:1},xe=q({props:{currentYear:null,earliestYear:null,releasesArray:null,initializing:{type:Boolean}},setup(t){const p=t,b=B(),u=O(),d=p.currentYear;let y=!0;const w=_([[""]]),c=_(s.artist),k=_(!1),g=_(!1),l=_("");z(c,()=>{if(!(y&&u.query.term)){switch(c.value){case s.score:l.value="7";break;case s.type:l.value="Album";break;case s.year:l.value=String(d);break;default:l.value=""}b.replace({query:{tab:"Search",term:l.value,type:s[c.value]}})}}),A(()=>{if(u.query.term){l.value=u.query.term,c.value=s[u.query.type];const h=setInterval(()=>{p.initializing||(i(),clearInterval(h),y=!1)},250)}else u.query.type&&(c.value=s[u.query.type]),y=!1});function i(){k.value=!1,g.value=!1,l.value=l.value.trim();let h=!1;switch(c.value){case s.score:h=!0;break;case s.type:h=!0;break;case s.year:h=!0;break}w.value=v(c.value,h),w.value.length>0?k.value=!0:g.value=!0,b.replace({query:{tab:"Search",term:l.value,type:s[c.value]}})}function v(h,m){return p.releasesArray.filter(f=>m?f[h].toLowerCase()===l.value.toLowerCase():f[h].toLowerCase().includes(l.value.toLowerCase()))}return(h,m)=>(r(),n("div",re,[oe,$(e("select",{"onUpdate:modelValue":m[0]||(m[0]=f=>c.value=f),class:"text-black pl-4 py-2 rounded w-72"},[e("option",{selected:"",value:a(s).artist},"Artist",8,ne),e("option",{value:a(s).name},"Release Name",8,ce),e("option",{value:a(s).score},"Score",8,ue),e("option",{value:a(s).year},"Year",8,ie),e("option",{value:a(s).genre},"Genre",8,de)],512),[[I,c.value]]),e("div",ve,[c.value===a(s).score?(r(),n("div",he,[e("div",fe,o(l.value),1),$(e("input",{"onUpdate:modelValue":m[1]||(m[1]=f=>l.value=f),placeholder:"10",type:"range",class:"w-64 bg-transparent h-2",min:"0",max:"10",step:"0.5"},null,512),[[M,l.value]])])):c.value===a(s).year?(r(),n("div",ye,[e("label",pe,o(l.value),1),$(e("input",{"onUpdate:modelValue":m[2]||(m[2]=f=>l.value=f),placeholder:String(a(d)),type:"range",class:"w-64 bg-transparent h-2",min:t.earliestYear,max:a(d),step:"1"},null,8,be),[[M,l.value]])])):$((r(),n("input",{key:2,"onUpdate:modelValue":m[3]||(m[3]=f=>l.value=f),class:"w-64 py-2 px-3 text-black rounded",placeholder:"Search input",onKeyup:N(i,["enter"])},null,40,me)),[[M,l.value]]),e("button",{disabled:t.initializing||l.value.length<1,class:"ml-4 tw-button",onClick:i}," Search ",8,_e)]),k.value?(r(),n("div",we,[(r(!0),n(x,null,V(w.value,(f,Y)=>(r(),T(le,{key:Y,index:Y,release:f},null,8,["index","release"]))),128))],512)):j("",!0),g.value?(r(),n("div",ge,"No results from your search.")):j("",!0)]))}});const S=t=>(P("data-v-5ad3b9c3"),t=t(),L(),t),ke={id:"statsContent",class:"w-full flex justify-center"},Se={class:"table-auto text-white w-96 border-collapse bg-[#212529]"},$e=S(()=>e("thead",{class:"border-solid p-2"},[e("tr",null,[e("th",null,"Stat"),e("th",null,"Value")])],-1)),Ce=S(()=>e("th",null,"Number of releases",-1)),je=S(()=>e("th",null,"Number of artists",-1)),qe=S(()=>e("th",null,"Average Year",-1)),Me=S(()=>e("th",null,"Average Score",-1)),Te={key:0},Ye={key:1},Ae=q({props:{statsObject:null},setup(t){return(p,b)=>(r(),n("div",ke,[e("table",Se,[$e,e("tbody",null,[e("tr",null,[Ce,e("td",null,o(t.statsObject.numberOfReleases),1)]),e("tr",null,[je,e("td",null,o(t.statsObject.numberOfArtists),1)]),e("tr",null,[qe,e("td",null,o(t.statsObject.averageYear),1)]),e("tr",null,[Me,e("td",null,o(t.statsObject.averageScore),1)]),(r(!0),n(x,null,V(t.statsObject.releasesPerYear,(u,d)=>(r(),n("tr",{key:d},[d>0?(r(),n("th",Te," Releases in the "+o(`${1950+d*10}s`),1)):(r(),n("th",Ye,"Releases before 1960")),e("td",null,o(u),1)]))),128))])])]))}}),Be=K(Ae,[["__scopeId","data-v-5ad3b9c3"]]),Oe={class:"tw-flex-col-center gap-4"},Ve=e("h1",{class:"mt-4 text-2xl font-semibold"},"My Music Page",-1),Pe=q({setup(t){const p=O(),b=B(),u=_(!0),d=_([[""]]),y=_("Stats"),w=_();D(()=>{const i=p.query.tab;i==="Search"?g(i):l("Stats"),Promise.all([c(),k()]).then(v=>{d.value=v[0],w.value=v[1],u.value=!1})});async function c(){return(await fetch("https://api.danielturcich.com/Releases")).json()}async function k(){return(await fetch("https://api.danielturcich.com/Stats")).json()}function g(i){y.value=i}function l(i){const v={query:{tab:i}};i==="Search"&&(v.query.type="artist"),b.replace(v),g(i)}return(i,v)=>(r(),n("div",Oe,[Ve,e("div",null,[e("button",{class:"tw-tab-button",type:"button",onClick:v[0]||(v[0]=h=>l("Stats"))}," Stats "),e("button",{class:"tw-tab-button",type:"button",onClick:v[1]||(v[1]=h=>l("Search"))}," Search ")]),u.value?j("",!0):(r(),n(x,{key:0},[a(y)==="Stats"?(r(),T(Be,{key:0,"stats-object":a(w)},null,8,["stats-object"])):a(y)==="Search"?(r(),T(xe,{key:1,"current-year":a(w).currentYear,"earliest-year":a(w).earliestYear,"releases-array":d.value,initializing:u.value},null,8,["current-year","earliest-year","releases-array","initializing"])):j("",!0)],64))]))}});export{Pe as default};
