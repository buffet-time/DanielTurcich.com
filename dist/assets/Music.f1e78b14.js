import{d as E,r as y,o as D,b as i,e as d,f as t,t as u,u as n,l as M,F as x,x as W,w as A,y as P,m as L,g as B,n as X,z as J,q as V,p as q,h as F,A as Q,i as z}from"./vendor.552c3087.js";import{d as Z,c as I}from"./dialog-polyfill.esm.c4f433fc.js";import{_ as U}from"./index.8b43e967.js";var s=(e=>(e[e.artist=0]="artist",e[e.name=1]="name",e[e.score=2]="score",e[e.type=3]="type",e[e.year=4]="year",e[e.genre=5]="genre",e[e.comments=6]="comments",e))(s||{}),j=(e=>(e[e["1950s"]=0]="1950s",e[e["1960s"]=1]="1960s",e[e["1970s"]=2]="1970s",e[e["1980s"]=3]="1980s",e[e["1990s"]=4]="1990s",e[e["2000s"]=5]="2000s",e[e["2010s"]=6]="2010s",e[e["2020s"]=7]="2020s",e))(j||{});const R={class:"tw-card m-0 p-2 h-full bg-transparent flex flex-col items-center justify-center"},ee={class:"overflow-hidden text-ellipsis max-w-full whitespace-nowrap"},te={class:"overflow-hidden text-ellipsis max-w-full whitespace-nowrap"},se={id:"releaseModal",class:"text-neutral-300 bg-[#383838] w-96"},ae={class:"flex items-center justify-between p-4 border-b border-solid border-[#dee2e6]"},le={class:"whitespace-nowrap"},re=["d"],oe={class:"flex flex-col items-center justify-center p-4 border-b border-solid border-[#dee2e6]"},ne={class:"mb-4"},ie=M("No comments for this release."),ce={class:"flex justify-between p-4 items-center"},ue=E({props:{index:null,release:null},setup(e){const h=e;let _;const l=y();D(()=>{Z.registerDialog(l.value),_=document.querySelector("#releaseModal")});function b(){navigator.clipboard.writeText(` ${h.release[s.artist]} - ${h.release[s.name]}: ${h.release[s.score]}`)}function p(){l.value.showModal(),setTimeout(()=>{document.addEventListener("click",a)},0)}function f(){document.removeEventListener("click",a),l.value.close()}function a(g){g.composedPath().includes(_)||f()}return(g,S)=>(i(),d(x,null,[t("div",{class:"tw-card bg-neutral-500 text-center m-2 cursor-pointer w-80 h-24 rounded",onClick:p},[t("div",R,[t("h5",ee,u(e.release[n(s).artist]),1),t("h6",te,u(e.release[n(s).name])+" ("+u(e.release[n(s).score])+"/10) ",1)])]),t("dialog",{ref_key:"releaseModal",ref:l,class:"bg-transparent"},[t("div",se,[t("div",ae,[t("h5",null,[M(u(e.release[n(s).artist])+" - "+u(e.release[n(s).name])+" ",1),t("span",le," ( "+u(e.release[n(s).score])+"/10 ) ",1)]),(i(),d("svg",{class:"w-6 min-w-[24px] cursor-pointer",viewBox:"0 0 24 24",onClick:f},[t("path",{fill:"currentColor",d:n(I)},null,8,re)]))]),t("div",oe,[t("div",ne,"Genres: "+u(e.release[n(s).genre]),1),e.release.length===7?(i(),d(x,{key:0},[M(u(e.release[n(s).comments]),1)],64)):(i(),d(x,{key:1},[ie],64))]),t("div",ce,[M(" ("+u(e.release[n(s).year])+" "+u(e.release[n(s).type])+") ",1),t("div",null,[t("button",{class:"tw-button mr-2",onClick:b},"Copy"),t("button",{type:"button",class:"tw-button",onClick:f}," Close ")])])])],512)],64))}});const de=e=>(q("data-v-583a8a61"),e=e(),F(),e),ve={id:"searchContent",class:"tabcontent hidden"},me=de(()=>t("h3",{class:"mb-2"},"Search by:",-1)),he=["value"],be=["value"],fe=["value"],ye=["value"],pe=["value"],_e=["value"],ge={class:"m-4 flex justify-center"},we={key:0,class:"flex flex-col"},ke={class:"mb-1"},xe={key:1},Se=["value"],$e={key:2,class:"flex flex-col"},Ae={for:"customRange1",class:"form-label"},Ce=["placeholder","min","max"],Ne=["onKeyup"],Ye=["disabled"],Me={key:0,ref:"releases",class:"m-2 mt-4 mb-2 flex flex-wrap justify-center"},je={key:1},Ee=E({props:{currentYear:null,earliestYear:null,releasesArray:null,initializing:{type:Boolean}},setup(e){const h=e,_=y([[""]]),l=y(s.artist),b=y(!1),p=y(h.currentYear),f=y(!1),a=y(""),g=["Album","EP","Live Album","Soundtrack","Remix Album","Compilation","Demo Album"];W(l,()=>{switch(l.value){case s.score:a.value="7";break;case s.type:a.value="Album";break;case s.year:a.value=String(p.value);break;default:a.value=""}}),D(()=>window.addEventListener("keydown",c=>{if(c.key==="ArrowLeft"||c.key==="ArrowRight")switch(l.value){case s.score:S(c.key,.5,0,10);break;case s.year:S(c.key,1,h.earliestYear,p.value);break}}));function S(c,v,o,w){c==="ArrowLeft"&&Number(a.value)>o?a.value=String(a.value+-v):c==="ArrowRight"&&Number(a.value)<w&&(a.value=String(a.value+v))}function k(){b.value=!1,f.value=!1,a.value=a.value.trim();let c=!1;switch(l.value){case s.score:c=!0;break;case s.type:c=!0;break;case s.year:c=!0;break}_.value=N(l.value,c),_.value.length>0?b.value=!0:f.value=!0}function N(c,v){return h.releasesArray.filter(o=>v?o[c].toLowerCase()===a.value.toLowerCase():o[c].toLowerCase().includes(a.value.toLowerCase()))}return(c,v)=>(i(),d("div",ve,[me,A(t("select",{"onUpdate:modelValue":v[0]||(v[0]=o=>l.value=o),class:"text-black pl-4 py-2 rounded w-72"},[t("option",{selected:"",value:n(s).artist},"Artist",8,he),t("option",{value:n(s).name},"Release Name",8,be),t("option",{value:n(s).score},"Score",8,fe),t("option",{value:n(s).type},"Type",8,ye),t("option",{value:n(s).year},"Year",8,pe),t("option",{value:n(s).genre},"Genre",8,_e)],512),[[P,l.value]]),t("div",ge,[l.value===n(s).score?(i(),d("div",we,[t("div",ke,u(a.value),1),A(t("input",{"onUpdate:modelValue":v[1]||(v[1]=o=>a.value=o),placeholder:"10",type:"range",class:"w-64 bg-transparent h-2",min:"0",max:"10",step:"0.5"},null,512),[[L,a.value]])])):l.value===n(s).type?(i(),d("div",xe,[A(t("select",{"onUpdate:modelValue":v[2]||(v[2]=o=>a.value=o),class:"form-select mb-3"},[(i(),d(x,null,B(g,(o,w)=>t("option",{key:w,value:o},u(o),9,Se)),64))],512),[[P,a.value]])])):l.value===n(s).year?(i(),d("div",$e,[t("label",Ae,u(a.value),1),A(t("input",{"onUpdate:modelValue":v[3]||(v[3]=o=>a.value=o),placeholder:String(p.value),type:"range",class:"w-64 bg-transparent h-2",min:e.earliestYear,max:p.value,step:"1"},null,8,Ce),[[L,a.value]])])):A((i(),d("input",{key:3,"onUpdate:modelValue":v[4]||(v[4]=o=>a.value=o),class:"w-64 py-2 px-3 text-black rounded",placeholder:"Search input",onKeyup:X(k,["enter"])},null,40,Ne)),[[L,a.value]]),t("button",{disabled:e.initializing||a.value.length<1,class:"ml-4 tw-button",onClick:k}," Search ",8,Ye)]),b.value?(i(),d("div",Me,[(i(!0),d(x,null,B(_.value,(o,w)=>(i(),J(ue,{key:w,index:w,release:o},null,8,["index","release"]))),128))],512)):V("",!0),f.value?(i(),d("div",je,"No results from your search.")):V("",!0)]))}}),Le=U(Ee,[["__scopeId","data-v-583a8a61"]]);const C=e=>(q("data-v-2ad3a08c"),e=e(),F(),e),Be={id:"statsContent",class:"tabcontent w-96"},Oe={class:"table-auto text-white w-full border-collapse bg-[#212529]"},Te=C(()=>t("thead",{class:"border-solid p-2"},[t("tr",null,[t("th",null,"Stat"),t("th",null,"Value")])],-1)),Pe=C(()=>t("th",null,"Number of releases",-1)),Ve=C(()=>t("th",null,"Number of artists",-1)),ze=C(()=>t("th",null,"Average Year",-1)),De=C(()=>t("th",null,"Average Score",-1)),qe={key:0},Fe={key:1},Ue=E({props:{statsObject:null},setup(e){return(h,_)=>(i(),d("div",Be,[t("table",Oe,[Te,t("tbody",null,[t("tr",null,[Pe,t("td",null,u(e.statsObject.numberOfReleases),1)]),t("tr",null,[Ve,t("td",null,u(e.statsObject.numberOfArtists),1)]),t("tr",null,[ze,t("td",null,u(e.statsObject.averageYear),1)]),t("tr",null,[De,t("td",null,u(e.statsObject.averageScore),1)]),(i(!0),d(x,null,B(e.statsObject.releasesPerYear,(l,b)=>(i(),d("tr",{key:b},[b>0?(i(),d("th",qe," Releases in the "+u(`${1950+b*10}s`),1)):(i(),d("th",Fe,"Releases before 1960")),t("td",null,u(l),1)]))),128))])])]))}}),He=U(Ue,[["__scopeId","data-v-2ad3a08c"]]),Ge={class:"tw-flex-col-center gap-4"},Ke=t("h1",{class:"mt-4 text-2xl font-semibold"},"My Music Page",-1),Qe=E({setup(e){const h="loading...",l=[];for(let r=0;r<j["2020s"]+1;r++)l.push(0);const b=y([[""]]),p=y(!0),f=y(2021),a=y({numberOfReleases:h,averageYear:h,averageScore:h,numberOfArtists:h,releasesPerYear:l}),g=[],S=[{id:"1tn0BmleHcs0okzWKhUnyOCWUPD422HvutpNQNzdAAIk",range:"Main!A2:F"},{id:"1dmETb3Ybqs8Dhez_kP2DHiXR_Gqw-X56qsXDHYyTH1w",range:"Main!A2:F"},{id:"18V5oypFBW3Bu_tHxfTL-iSbb9ALYrCJlMwLhpPmp72M",range:"Main!A2:G"},{id:"1lyFD7uLMT0mRdGkKwvbIm_2pqk2YJU7rtRQVhHq-nwU",range:"Main!A2:G"}];let k=0,N=0,c=0,v=0,o=0;Q(async()=>{await w(),p.value=!1,b.value.forEach(r=>{g.includes(r[s.artist])||g.push(r[s.artist]);const m=Number(r[s.year]);m<f.value&&(f.value=m),o+=m,c++,G(r[s.score])?(v+=Number(r[s.score]),k++):r[s.score]=="?"&&N++,m>1959?l[j[r[s.year].slice(0,3)+"0s"]]++:l[j["1950s"]]++}),a.value={averageScore:(v/k).toFixed(2),numberOfArtists:g.length,averageYear:(o/c).toFixed(2),numberOfReleases:k+N,releasesPerYear:l}});async function w(){b.value=(await Promise.all(S.map(r=>H(r.id,r.range)))).flat().filter(r=>(r.forEach(m=>{m.trim()}),r.length>5))}async function H(r,m){return(await fetch(`https://api.danielturcich.com/Sheets?id=${r}&range=${m}`)).json()}function G(r){return!isNaN(Number(r))}function O(r,m){const $=Array.from(document.getElementsByClassName("tabcontent")),K=Array.from(document.getElementsByClassName("tablinks"));$.forEach(Y=>{Y.style.display="none"}),K.forEach(Y=>{Y.className=Y.className.replace(" active","")});const T=document.getElementById(m);if(!T){console.log("Error in switchtab");return}T.style.display="block",r.currentTarget.tabName+=" active"}return(r,m)=>(i(),d("div",Ge,[Ke,t("div",null,[t("button",{class:"tablinks active tw-tab-button",type:"button",onClick:m[0]||(m[0]=$=>O($,"statsContent"))}," Stats "),t("button",{class:"tablinks tw-tab-button",type:"button",onClick:m[1]||(m[1]=$=>O($,"searchContent"))}," Search ")]),z(He,{"stats-object":n(a)},null,8,["stats-object"]),z(Le,{"current-year":2021,"earliest-year":f.value,"releases-array":b.value,initializing:p.value},null,8,["earliest-year","releases-array","initializing"])]))}});export{Qe as default};
