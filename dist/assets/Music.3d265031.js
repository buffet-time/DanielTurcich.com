import{d as A,r as p,o as z,b as r,e as c,f as t,t as o,u as a,l as M,F as Y,y as D,z as F,x as K,w as q,A as G,m as T,n as H,g as L,B,q as P,p as J,h as Q,C as W}from"./vendor.ff821898.js";import{d as X,c as Z}from"./dialog-polyfill.esm.c4f433fc.js";import{_ as I}from"./index.0f9ff55c.js";var s=(e=>(e[e.artist=0]="artist",e[e.name=1]="name",e[e.score=2]="score",e[e.type=3]="type",e[e.year=4]="year",e[e.genre=5]="genre",e[e.comments=6]="comments",e))(s||{}),O=(e=>(e[e["1950s"]=0]="1950s",e[e["1960s"]=1]="1960s",e[e["1970s"]=2]="1970s",e[e["1980s"]=3]="1980s",e[e["1990s"]=4]="1990s",e[e["2000s"]=5]="2000s",e[e["2010s"]=6]="2010s",e[e["2020s"]=7]="2020s",e))(O||{});const R={class:"tw-card m-0 p-2 h-full bg-transparent flex flex-col items-center justify-center"},ee={class:"overflow-hidden text-ellipsis max-w-full whitespace-nowrap"},te={class:"flex max-w-full gap-1"},se={class:"flex-auto overflow-hidden whitespace-nowrap text-ellipsis"},ae={class:"flex-none"},le={id:"releaseModal",class:"text-neutral-300 bg-[#383838]"},re={class:"flex items-center justify-between p-4 border-b border-solid border-[#dee2e6]"},oe={class:"whitespace-nowrap"},ne=["d"],ce={class:"flex flex-col items-center justify-center p-4 border-b border-solid border-[#dee2e6]"},ue={class:"mb-4"},ie=M("No comments for this release."),de={class:"flex justify-between p-4 items-center"},ve=A({props:{index:null,release:null},setup(e){const f=e,b=p();z(()=>{typeof HTMLDialogElement!="function"&&X.registerDialog(b.value)});function u(){navigator.clipboard.writeText(` ${f.release[s.artist]} - ${f.release[s.name]}: ${f.release[s.score]}`)}function m(){b.value.showModal()}function _(){b.value.close()}return(g,n)=>(r(),c(Y,null,[t("div",{class:"tw-card bg-neutral-500 text-center m-2 cursor-pointer w-80 h-24 rounded",onClick:m},[t("div",R,[t("div",ee,o(e.release[a(s).artist]),1),t("div",te,[t("div",se,o(e.release[a(s).name]),1),t("div",ae,"("+o(e.release[a(s).score])+"/10)",1)])])]),t("dialog",{ref_key:"releaseModal",ref:b,class:"bg-transparent p-0 w-[88vw]"},[t("div",le,[t("div",re,[t("h5",null,[M(o(e.release[a(s).artist])+" - "+o(e.release[a(s).name])+" ",1),t("span",oe," ( "+o(e.release[a(s).score])+"/10 ) ",1)]),(r(),c("svg",{class:"w-6 min-w-[24px] cursor-pointer",viewBox:"0 0 24 24",onClick:_},[t("path",{fill:"currentColor",d:a(Z)},null,8,ne)]))]),t("div",ce,[t("div",ue,"Genres: "+o(e.release[a(s).genre]),1),e.release.length===7?(r(),c(Y,{key:0},[M(o(e.release[a(s).comments]),1)],64)):(r(),c(Y,{key:1},[ie],64))]),t("div",de,[M(" ("+o(e.release[a(s).year])+" "+o(e.release[a(s).type])+") ",1),t("div",null,[t("button",{class:"tw-button mr-2",onClick:u},"Copy"),t("button",{type:"button",class:"tw-button",onClick:_}," Close ")])])])],512)],64))}}),fe={id:"searchContent",class:"w-full"},he=t("h3",{class:"mb-2"},"Search by:",-1),ye=["value"],be=["value"],me=["value"],pe=["value"],_e=["value"],ge={class:"m-4 flex justify-center"},we={key:0,class:"flex flex-col"},xe={class:"mb-1"},Se={key:1,class:"flex flex-col"},ke={for:"customRange1",class:"form-label"},$e=["placeholder","min","max"],Ce=["onKeyup"],Ye=["disabled"],je={key:0,ref:"releases",class:"m-2 mt-4 mb-2 flex flex-wrap justify-center"},qe={key:1},Me=A({props:{currentYear:null,earliestYear:null,releasesArray:null,initializing:{type:Boolean}},setup(e){const f=e,b=D(),u=F(),m=f.currentYear;let _=!0;const g=p([[""]]),n=p(s.artist),S=p(!1),w=p(!1),l=p("");K(n,()=>{if(!(_&&u.query.term)){switch(n.value){case s.score:l.value="7";break;case s.type:l.value="Album";break;case s.year:l.value=String(m);break;default:l.value=""}b.replace({query:{tab:"Search",term:l.value,type:s[n.value]}})}}),z(()=>{if(u.query.term){l.value=u.query.term,n.value=s[u.query.type];const h=setInterval(()=>{f.initializing||(x(),clearInterval(h),_=!1)},250)}else u.query.type&&(n.value=s[u.query.type]),_=!1});function x(){S.value=!1,w.value=!1,l.value=l.value.trim();let h=!1;switch(n.value){case s.score:h=!0;break;case s.type:h=!0;break;case s.year:h=!0;break}g.value=$(n.value,h),g.value.length>0?S.value=!0:w.value=!0,b.replace({query:{tab:"Search",term:l.value,type:s[n.value]}})}function $(h,y){return f.releasesArray.filter(i=>y?i[h].toLowerCase()===l.value.toLowerCase():i[h].toLowerCase().includes(l.value.toLowerCase()))}return(h,y)=>(r(),c("div",fe,[he,q(t("select",{"onUpdate:modelValue":y[0]||(y[0]=i=>n.value=i),class:"text-black pl-4 py-2 rounded w-72"},[t("option",{selected:"",value:a(s).artist},"Artist",8,ye),t("option",{value:a(s).name},"Release Name",8,be),t("option",{value:a(s).score},"Score",8,me),t("option",{value:a(s).year},"Year",8,pe),t("option",{value:a(s).genre},"Genre",8,_e)],512),[[G,n.value]]),t("div",ge,[n.value===a(s).score?(r(),c("div",we,[t("div",xe,o(l.value),1),q(t("input",{"onUpdate:modelValue":y[1]||(y[1]=i=>l.value=i),placeholder:"10",type:"range",class:"w-64 bg-transparent h-2",min:"0",max:"10",step:"0.5"},null,512),[[T,l.value]])])):n.value===a(s).year?(r(),c("div",Se,[t("label",ke,o(l.value),1),q(t("input",{"onUpdate:modelValue":y[2]||(y[2]=i=>l.value=i),placeholder:String(a(m)),type:"range",class:"w-64 bg-transparent h-2",min:e.earliestYear,max:a(m),step:"1"},null,8,$e),[[T,l.value]])])):q((r(),c("input",{key:2,"onUpdate:modelValue":y[3]||(y[3]=i=>l.value=i),class:"w-64 py-2 px-3 text-black rounded",placeholder:"Search input",onKeyup:H(x,["enter"])},null,40,Ce)),[[T,l.value]]),t("button",{disabled:e.initializing||l.value.length<1,class:"ml-4 tw-button",onClick:x}," Search ",8,Ye)]),S.value?(r(),c("div",je,[(r(!0),c(Y,null,L(g.value,(i,C)=>(r(),B(ve,{key:C,index:C,release:i},null,8,["index","release"]))),128))],512)):P("",!0),w.value?(r(),c("div",qe,"No results from your search.")):P("",!0)]))}});const j=e=>(J("data-v-5ad3b9c3"),e=e(),Q(),e),Oe={id:"statsContent",class:"w-full flex justify-center"},Ae={class:"table-auto text-white w-96 border-collapse bg-[#212529]"},Ne=j(()=>t("thead",{class:"border-solid p-2"},[t("tr",null,[t("th",null,"Stat"),t("th",null,"Value")])],-1)),Te=j(()=>t("th",null,"Number of releases",-1)),Be=j(()=>t("th",null,"Number of artists",-1)),Pe=j(()=>t("th",null,"Average Year",-1)),Ve=j(()=>t("th",null,"Average Score",-1)),ze={key:0},De={key:1},Fe=A({props:{statsObject:null},setup(e){return(f,b)=>(r(),c("div",Oe,[t("table",Ae,[Ne,t("tbody",null,[t("tr",null,[Te,t("td",null,o(e.statsObject.numberOfReleases),1)]),t("tr",null,[Be,t("td",null,o(e.statsObject.numberOfArtists),1)]),t("tr",null,[Pe,t("td",null,o(e.statsObject.averageYear),1)]),t("tr",null,[Ve,t("td",null,o(e.statsObject.averageScore),1)]),(r(!0),c(Y,null,L(e.statsObject.releasesPerYear,(u,m)=>(r(),c("tr",{key:m},[m>0?(r(),c("th",ze," Releases in the "+o(`${1950+m*10}s`),1)):(r(),c("th",De,"Releases before 1960")),t("td",null,o(u),1)]))),128))])])]))}}),Le=I(Fe,[["__scopeId","data-v-5ad3b9c3"]]),Ue={class:"tw-flex-col-center gap-4"},Ee=t("h1",{class:"mt-4 text-2xl font-semibold"},"My Music Page",-1),Je=A({setup(e){const f="loading...",b=new Date().getFullYear(),u=[],m=D(),_=F();for(let v=0;v<Object.keys(O).length/2;v++)u.push(0);const g=p("Stats"),n=p([[""]]),S=p(!0),w=p(b),l=p({numberOfReleases:f,averageYear:f,averageScore:f,numberOfArtists:f,releasesPerYear:u}),x=[];let $=0,h=0,y=0,i=0,C=0;W(async()=>{const v=_.query.tab;v==="Search"?V(v):N("Stats"),n.value=await U(),S.value=!1,n.value.forEach(d=>{x.includes(d[s.artist])||x.push(d[s.artist]);const k=Number(d[s.year]);k<w.value&&(w.value=k),C+=k,y++,E(d[s.score])?(i+=Number(d[s.score]),$++):d[s.score]=="?"&&h++,k>1959?u[O[d[s.year].slice(0,3)+"0s"]]++:u[O["1950s"]]++}),l.value={averageScore:(i/$).toFixed(2),numberOfArtists:x.length,averageYear:(C/y).toFixed(2),numberOfReleases:$+h,releasesPerYear:u}});async function U(){return(await fetch("https://api.danielturcich.com/Releases")).json()}function E(v){return!isNaN(Number(v))}function V(v){g.value=v}function N(v){const d={query:{tab:v}};v==="Search"&&(d.query.type="artist"),m.replace(d),V(v)}return(v,d)=>(r(),c("div",Ue,[Ee,t("div",null,[t("button",{class:"tw-tab-button",type:"button",onClick:d[0]||(d[0]=k=>N("Stats"))}," Stats "),t("button",{class:"tw-tab-button",type:"button",onClick:d[1]||(d[1]=k=>N("Search"))}," Search ")]),a(g)==="Stats"?(r(),B(Le,{key:0,"stats-object":a(l)},null,8,["stats-object"])):a(g)==="Search"?(r(),B(Me,{key:1,"current-year":a(b),"earliest-year":w.value,"releases-array":n.value,initializing:S.value},null,8,["current-year","earliest-year","releases-array","initializing"])):P("",!0)]))}});export{Je as default};
