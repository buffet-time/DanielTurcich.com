import{d as q,r as _,o as B,b as r,e as n,f as e,t as o,u as a,l as C,F as x,y as O,z as P,x as z,w as S,A as I,m as M,n as N,g as V,B as T,q as j,p as D,h as L,C as E}from"./vendor.3c7c0a4b.js";import{d as F,c as U}from"./dialog-polyfill.esm.c4f433fc.js";import{_ as K}from"./index.939ec339.js";var s=(t=>(t[t.artist=0]="artist",t[t.name=1]="name",t[t.score=2]="score",t[t.type=3]="type",t[t.year=4]="year",t[t.genre=5]="genre",t[t.comments=6]="comments",t))(s||{});const R={class:"tw-card m-0 p-2 h-full bg-transparent flex flex-col items-center justify-center"},G={class:"overflow-hidden text-ellipsis max-w-full whitespace-nowrap"},H={class:"flex max-w-full gap-1"},J={class:"flex-auto overflow-hidden whitespace-nowrap text-ellipsis"},Q={class:"flex-none"},W={id:"releaseModal",class:"text-neutral-300 bg-[#383838]"},X={class:"flex items-center justify-between p-4 border-b border-solid border-[#dee2e6]"},Z={class:"whitespace-nowrap"},ee=["d"],te={class:"flex flex-col items-center justify-center p-4 border-b border-solid border-[#dee2e6]"},se={class:"mb-4"},ae=C("No comments for this release."),le={class:"flex justify-between p-4 items-center"},re=q({props:{index:null,release:null},setup(t){const i=t,b=_();B(()=>{typeof HTMLDialogElement!="function"&&F.registerDialog(b.value)});function v(){navigator.clipboard.writeText(` ${i.release[s.artist]} - ${i.release[s.name]}: ${i.release[s.score]}`)}function f(){b.value.showModal()}function m(){b.value.close()}return(w,u)=>(r(),n(x,null,[e("div",{class:"tw-card bg-neutral-500 text-center m-2 cursor-pointer w-80 h-24 rounded",onClick:f},[e("div",R,[e("div",G,o(t.release[a(s).artist]),1),e("div",H,[e("div",J,o(t.release[a(s).name]),1),e("div",Q,"("+o(t.release[a(s).score])+"/10)",1)])])]),e("dialog",{ref_key:"releaseModal",ref:b,class:"bg-transparent p-0 w-[88vw]"},[e("div",W,[e("div",X,[e("h5",null,[C(o(t.release[a(s).artist])+" - "+o(t.release[a(s).name])+" ",1),e("span",Z," ( "+o(t.release[a(s).score])+"/10 ) ",1)]),(r(),n("svg",{class:"w-6 min-w-[24px] cursor-pointer",viewBox:"0 0 24 24",onClick:m},[e("path",{fill:"currentColor",d:a(U)},null,8,ee)]))]),e("div",te,[e("div",se,"Genres: "+o(t.release[a(s).genre]),1),t.release.length===7?(r(),n(x,{key:0},[C(o(t.release[a(s).comments]),1)],64)):(r(),n(x,{key:1},[ae],64))]),e("div",le,[C(" ("+o(t.release[a(s).year])+" "+o(t.release[a(s).type])+") ",1),e("div",null,[e("button",{class:"tw-button mr-2",onClick:v},"Copy"),e("button",{type:"button",class:"tw-button",onClick:m}," Close ")])])])],512)],64))}}),oe={id:"searchContent",class:"w-full"},ne=e("h3",{class:"mb-2"},"Search by:",-1),ce=["value"],ie=["value"],ue=["value"],de=["value"],ve=["value"],he={class:"m-4 flex justify-center"},fe={key:0,class:"flex flex-col"},ye={class:"mb-1"},pe={key:1,class:"flex flex-col"},me={for:"customRange1",class:"form-label"},be=["placeholder","min","max"],_e=["onKeyup"],we=["disabled"],ge={key:0,ref:"releases",class:"m-2 mt-4 mb-2 flex flex-wrap justify-center"},xe={key:1},$e=q({props:{currentYear:null,earliestYear:null,releasesArray:null,initializing:{type:Boolean}},setup(t){const i=t,b=O(),v=P(),f=i.currentYear;let m=!0;const w=_([[""]]),u=_(s.artist),$=_(!1),g=_(!1),l=_("");z(u,()=>{if(!(m&&v.query.term)){switch(u.value){case s.score:l.value="7";break;case s.type:l.value="Album";break;case s.year:l.value=String(f);break;default:l.value=""}b.replace({query:{tab:"Search",term:l.value,type:s[u.value]}})}}),B(()=>{if(v.query.term){l.value=v.query.term,u.value=s[v.query.type];const d=setInterval(()=>{i.initializing||(h(),clearInterval(d),m=!1)},250)}else v.query.type&&(u.value=s[v.query.type]),m=!1});function h(){$.value=!1,g.value=!1,l.value=l.value.trim();let d=!1;switch(u.value){case s.score:d=!0;break;case s.type:d=!0;break;case s.year:d=!0;break}w.value=y(u.value,d),w.value.length>0?$.value=!0:g.value=!0,b.replace({query:{tab:"Search",term:l.value,type:s[u.value]}})}function y(d,c){return i.releasesArray.filter(p=>c?p[d].toLowerCase()===l.value.toLowerCase():p[d].toLowerCase().includes(l.value.toLowerCase()))}return(d,c)=>(r(),n("div",oe,[ne,S(e("select",{"onUpdate:modelValue":c[0]||(c[0]=p=>u.value=p),class:"text-black pl-4 py-2 rounded w-72"},[e("option",{selected:"",value:a(s).artist},"Artist",8,ce),e("option",{value:a(s).name},"Release Name",8,ie),e("option",{value:a(s).score},"Score",8,ue),e("option",{value:a(s).year},"Year",8,de),e("option",{value:a(s).genre},"Genre",8,ve)],512),[[I,u.value]]),e("div",he,[u.value===a(s).score?(r(),n("div",fe,[e("div",ye,o(l.value),1),S(e("input",{"onUpdate:modelValue":c[1]||(c[1]=p=>l.value=p),placeholder:"10",type:"range",class:"w-64 bg-transparent h-2",min:"0",max:"10",step:"0.5"},null,512),[[M,l.value]])])):u.value===a(s).year?(r(),n("div",pe,[e("label",me,o(l.value),1),S(e("input",{"onUpdate:modelValue":c[2]||(c[2]=p=>l.value=p),placeholder:String(a(f)),type:"range",class:"w-64 bg-transparent h-2",min:t.earliestYear,max:a(f),step:"1"},null,8,be),[[M,l.value]])])):S((r(),n("input",{key:2,"onUpdate:modelValue":c[3]||(c[3]=p=>l.value=p),class:"w-64 py-2 px-3 text-black rounded",placeholder:"Search input",onKeyup:N(h,["enter"])},null,40,_e)),[[M,l.value]]),e("button",{disabled:t.initializing||l.value.length<1,class:"ml-4 tw-button",onClick:h}," Search ",8,we)]),$.value?(r(),n("div",ge,[(r(!0),n(x,null,V(w.value,(p,Y)=>(r(),T(re,{key:Y,index:Y,release:p},null,8,["index","release"]))),128))],512)):j("",!0),g.value?(r(),n("div",xe,"No results from your search.")):j("",!0)]))}});const k=t=>(D("data-v-5ad3b9c3"),t=t(),L(),t),ke={id:"statsContent",class:"w-full flex justify-center"},Se={class:"table-auto text-white w-96 border-collapse bg-[#212529]"},Ce=k(()=>e("thead",{class:"border-solid p-2"},[e("tr",null,[e("th",null,"Stat"),e("th",null,"Value")])],-1)),je=k(()=>e("th",null,"Number of releases",-1)),qe=k(()=>e("th",null,"Number of artists",-1)),Me=k(()=>e("th",null,"Average Year",-1)),Te=k(()=>e("th",null,"Average Score",-1)),Ye={key:0},Ae={key:1},Be=q({props:{statsObject:null},setup(t){return(i,b)=>(r(),n("div",ke,[e("table",Se,[Ce,e("tbody",null,[e("tr",null,[je,e("td",null,o(t.statsObject.numberOfReleases),1)]),e("tr",null,[qe,e("td",null,o(t.statsObject.numberOfArtists),1)]),e("tr",null,[Me,e("td",null,o(t.statsObject.averageYear),1)]),e("tr",null,[Te,e("td",null,o(t.statsObject.averageScore),1)]),(r(!0),n(x,null,V(t.statsObject.releasesPerYear,(v,f)=>(r(),n("tr",{key:f},[f>0?(r(),n("th",Ye," Releases in the "+o(`${1950+f*10}s`),1)):(r(),n("th",Ae,"Releases before 1960")),e("td",null,o(v),1)]))),128))])])]))}}),Oe=K(Be,[["__scopeId","data-v-5ad3b9c3"]]);async function A(t){try{const i=await fetch(t);return i.ok?await i.json():(console.error("Responded with an error:"+await i.json()),null)}catch(i){return console.error(`Error in fetch call: ${i}`),null}}const Pe={class:"tw-flex-col-center gap-4"},Ve=e("h1",{class:"mt-4 text-2xl font-semibold"},"My Music Page",-1),De=q({setup(t){const i=P(),b=O(),v=_(!0),f=_([[""]]),m=_("Stats"),w=_();E(()=>{const h=i.query.tab;h==="Search"?g(h):l("Stats");let y=0;const d=()=>{y>2&&console.error("Can't get the data :("),Promise.all([u(),$()]).then(c=>{c[0]&&c[1]?(f.value=c[0],w.value=c[1],v.value=!1):setTimeout(()=>{d(),y++},5e3)}).catch(c=>{console.error(`Error in Music.vue promise.all(): ${c}`)})};d()});async function u(){return await A("https://api.danielturcich.com/Releases")}async function $(){return await A("https://api.danielturcich.com/Stats")}function g(h){m.value=h}function l(h){const y={query:{tab:h}};h==="Search"&&(y.query.type="artist"),b.replace(y),g(h)}return(h,y)=>(r(),n("div",Pe,[Ve,e("div",null,[e("button",{class:"tw-tab-button",type:"button",onClick:y[0]||(y[0]=d=>l("Stats"))}," Stats "),e("button",{class:"tw-tab-button",type:"button",onClick:y[1]||(y[1]=d=>l("Search"))}," Search ")]),v.value?j("",!0):(r(),n(x,{key:0},[a(m)==="Stats"?(r(),T(Oe,{key:0,"stats-object":a(w)},null,8,["stats-object"])):a(m)==="Search"?(r(),T($e,{key:1,"current-year":a(w).currentYear,"earliest-year":a(w).earliestYear,"releases-array":f.value,initializing:v.value},null,8,["current-year","earliest-year","releases-array","initializing"])):j("",!0)],64))]))}});export{De as default};
