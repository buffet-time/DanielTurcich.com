import{d as N,r as p,o as F,b as o,e as v,f as t,t as d,u as a,l as j,F as $,y as U,z as H,x as Q,w as q,A as V,m as P,g as B,n as Z,B as L,q as z,p as E,h as G,C as I}from"./vendor.ff821898.js";import{d as R,c as ee}from"./dialog-polyfill.esm.c4f433fc.js";import{_ as K}from"./index.ebfec4ae.js";var s=(e=>(e[e.artist=0]="artist",e[e.name=1]="name",e[e.score=2]="score",e[e.type=3]="type",e[e.year=4]="year",e[e.genre=5]="genre",e[e.comments=6]="comments",e))(s||{}),T=(e=>(e[e["1950s"]=0]="1950s",e[e["1960s"]=1]="1960s",e[e["1970s"]=2]="1970s",e[e["1980s"]=3]="1980s",e[e["1990s"]=4]="1990s",e[e["2000s"]=5]="2000s",e[e["2010s"]=6]="2010s",e[e["2020s"]=7]="2020s",e))(T||{});const te={class:"tw-card m-0 p-2 h-full bg-transparent flex flex-col items-center justify-center"},se={class:"overflow-hidden text-ellipsis max-w-full whitespace-nowrap"},ae={class:"flex max-w-full gap-1"},le={class:"flex-auto overflow-hidden whitespace-nowrap text-ellipsis"},re={class:"flex-none"},oe={id:"releaseModal",class:"text-neutral-300 bg-[#383838]"},ne={class:"flex items-center justify-between p-4 border-b border-solid border-[#dee2e6]"},ie={class:"whitespace-nowrap"},ce=["d"],ue={class:"flex flex-col items-center justify-center p-4 border-b border-solid border-[#dee2e6]"},de={class:"mb-4"},ve=j("No comments for this release."),he={class:"flex justify-between p-4 items-center"},me=N({props:{index:null,release:null},setup(e){const m=e;let _;const c=p();F(()=>{R.registerDialog(c.value),_=document.querySelector("#releaseModal")});function b(){navigator.clipboard.writeText(` ${m.release[s.artist]} - ${m.release[s.name]}: ${m.release[s.score]}`)}function x(){c.value.showModal(),setTimeout(()=>{document.addEventListener("click",n)},0)}function f(){document.removeEventListener("click",n),c.value.close()}function n(g){g.composedPath().includes(_)||f()}return(g,w)=>(o(),v($,null,[t("div",{class:"tw-card bg-neutral-500 text-center m-2 cursor-pointer w-80 h-24 rounded",onClick:x},[t("div",te,[t("div",se,d(e.release[a(s).artist]),1),t("div",ae,[t("div",le,d(e.release[a(s).name]),1),t("div",re,"("+d(e.release[a(s).score])+"/10)",1)])])]),t("dialog",{ref_key:"releaseModal",ref:c,class:"bg-transparent p-0 w-[88vw]"},[t("div",oe,[t("div",ne,[t("h5",null,[j(d(e.release[a(s).artist])+" - "+d(e.release[a(s).name])+" ",1),t("span",ie," ( "+d(e.release[a(s).score])+"/10 ) ",1)]),(o(),v("svg",{class:"w-6 min-w-[24px] cursor-pointer",viewBox:"0 0 24 24",onClick:f},[t("path",{fill:"currentColor",d:a(ee)},null,8,ce)]))]),t("div",ue,[t("div",de,"Genres: "+d(e.release[a(s).genre]),1),e.release.length===7?(o(),v($,{key:0},[j(d(e.release[a(s).comments]),1)],64)):(o(),v($,{key:1},[ve],64))]),t("div",he,[j(" ("+d(e.release[a(s).year])+" "+d(e.release[a(s).type])+") ",1),t("div",null,[t("button",{class:"tw-button mr-2",onClick:b},"Copy"),t("button",{type:"button",class:"tw-button",onClick:f}," Close ")])])])],512)],64))}});const ye=e=>(E("data-v-491b3606"),e=e(),G(),e),fe={id:"searchContent",class:"w-full"},pe=ye(()=>t("h3",{class:"mb-2"},"Search by:",-1)),be=["value"],_e=["value"],ge=["value"],we=["value"],xe=["value"],ke=["value"],Se={class:"m-4 flex justify-center"},$e={key:0,class:"flex flex-col"},Ae={class:"mb-1"},Ce={key:1},Ye=["value"],qe={key:2,class:"flex flex-col"},Me={for:"customRange1",class:"form-label"},je=["placeholder","min","max"],Te=["onKeyup"],Ne=["disabled"],Oe={key:0,ref:"releases",class:"m-2 mt-4 mb-2 flex flex-wrap justify-center"},Pe={key:1},Be=N({props:{currentYear:null,earliestYear:null,releasesArray:null,initializing:{type:Boolean}},setup(e){const m=e,_=U(),c=H();let b=!0;const x=m.currentYear,f=p([[""]]),n=p(s.artist),g=p(!1),w=p(!1),l=p(""),A=["Album","EP","Live Album","Soundtrack","Remix Album","Compilation","Demo Album"];Q(n,()=>{if(!(b&&c.query.term))switch(_.replace({query:{tab:"Search",term:l.value,type:s[n.value]}}),n.value){case s.score:l.value="7";break;case s.type:l.value="Album";break;case s.year:l.value=String(x);break;default:l.value=""}}),F(()=>{if(c.query.term){l.value=c.query.term,n.value=s[c.query.type];const y=setInterval(()=>{m.initializing||(C(),clearInterval(y),b=!1)},250)}else c.query.type&&(n.value=s[c.query.type])});function C(){g.value=!1,w.value=!1,l.value=l.value.trim();let y=!1;switch(n.value){case s.score:y=!0;break;case s.type:y=!0;break;case s.year:y=!0;break}f.value=Y(n.value,y),f.value.length>0?g.value=!0:w.value=!0,_.replace({query:{tab:"Search",term:l.value,type:s[n.value]}})}function Y(y,h){return m.releasesArray.filter(i=>h?i[y].toLowerCase()===l.value.toLowerCase():i[y].toLowerCase().includes(l.value.toLowerCase()))}return(y,h)=>(o(),v("div",fe,[pe,q(t("select",{"onUpdate:modelValue":h[0]||(h[0]=i=>n.value=i),class:"text-black pl-4 py-2 rounded w-72"},[t("option",{selected:"",value:a(s).artist},"Artist",8,be),t("option",{value:a(s).name},"Release Name",8,_e),t("option",{value:a(s).score},"Score",8,ge),t("option",{value:a(s).type},"Type",8,we),t("option",{value:a(s).year},"Year",8,xe),t("option",{value:a(s).genre},"Genre",8,ke)],512),[[V,n.value]]),t("div",Se,[n.value===a(s).score?(o(),v("div",$e,[t("div",Ae,d(l.value),1),q(t("input",{"onUpdate:modelValue":h[1]||(h[1]=i=>l.value=i),placeholder:"10",type:"range",class:"w-64 bg-transparent h-2",min:"0",max:"10",step:"0.5"},null,512),[[P,l.value]])])):n.value===a(s).type?(o(),v("div",Ce,[q(t("select",{"onUpdate:modelValue":h[2]||(h[2]=i=>l.value=i),class:"text-black pl-4 py-2 rounded w-64"},[(o(),v($,null,B(A,(i,k)=>t("option",{key:k,value:i},d(i),9,Ye)),64))],512),[[V,l.value]])])):n.value===a(s).year?(o(),v("div",qe,[t("label",Me,d(l.value),1),q(t("input",{"onUpdate:modelValue":h[3]||(h[3]=i=>l.value=i),placeholder:String(a(x)),type:"range",class:"w-64 bg-transparent h-2",min:e.earliestYear,max:a(x),step:"1"},null,8,je),[[P,l.value]])])):q((o(),v("input",{key:3,"onUpdate:modelValue":h[4]||(h[4]=i=>l.value=i),class:"w-64 py-2 px-3 text-black rounded",placeholder:"Search input",onKeyup:Z(C,["enter"])},null,40,Te)),[[P,l.value]]),t("button",{disabled:e.initializing||l.value.length<1,class:"ml-4 tw-button",onClick:C}," Search ",8,Ne)]),g.value?(o(),v("div",Oe,[(o(!0),v($,null,B(f.value,(i,k)=>(o(),L(me,{key:k,index:k,release:i},null,8,["index","release"]))),128))],512)):z("",!0),w.value?(o(),v("div",Pe,"No results from your search.")):z("",!0)]))}}),Le=K(Be,[["__scopeId","data-v-491b3606"]]);const M=e=>(E("data-v-5ad3b9c3"),e=e(),G(),e),ze={id:"statsContent",class:"w-full flex justify-center"},De={class:"table-auto text-white w-96 border-collapse bg-[#212529]"},Ve=M(()=>t("thead",{class:"border-solid p-2"},[t("tr",null,[t("th",null,"Stat"),t("th",null,"Value")])],-1)),Fe=M(()=>t("th",null,"Number of releases",-1)),Ue=M(()=>t("th",null,"Number of artists",-1)),He=M(()=>t("th",null,"Average Year",-1)),Ee=M(()=>t("th",null,"Average Score",-1)),Ge={key:0},Ke={key:1},We=N({props:{statsObject:null},setup(e){return(m,_)=>(o(),v("div",ze,[t("table",De,[Ve,t("tbody",null,[t("tr",null,[Fe,t("td",null,d(e.statsObject.numberOfReleases),1)]),t("tr",null,[Ue,t("td",null,d(e.statsObject.numberOfArtists),1)]),t("tr",null,[He,t("td",null,d(e.statsObject.averageYear),1)]),t("tr",null,[Ee,t("td",null,d(e.statsObject.averageScore),1)]),(o(!0),v($,null,B(e.statsObject.releasesPerYear,(c,b)=>(o(),v("tr",{key:b},[b>0?(o(),v("th",Ge," Releases in the "+d(`${1950+b*10}s`),1)):(o(),v("th",Ke,"Releases before 1960")),t("td",null,d(c),1)]))),128))])])]))}}),Xe=K(We,[["__scopeId","data-v-5ad3b9c3"]]),Je={class:"tw-flex-col-center gap-4"},Qe=t("h1",{class:"mt-4 text-2xl font-semibold"},"My Music Page",-1),et=N({setup(e){const m="loading...",_=new Date().getFullYear(),c=[],b=U(),x=H();for(let r=0;r<T["2020s"]+1;r++)c.push(0);const f=p("Stats"),n=p([[""]]),g=p(!0),w=p(_),l=p({numberOfReleases:m,averageYear:m,averageScore:m,numberOfArtists:m,releasesPerYear:c}),A=[],C=[{id:"1tn0BmleHcs0okzWKhUnyOCWUPD422HvutpNQNzdAAIk",range:"Main!A2:F"},{id:"1dmETb3Ybqs8Dhez_kP2DHiXR_Gqw-X56qsXDHYyTH1w",range:"Main!A2:F"},{id:"18V5oypFBW3Bu_tHxfTL-iSbb9ALYrCJlMwLhpPmp72M",range:"Main!A2:G"},{id:"1lyFD7uLMT0mRdGkKwvbIm_2pqk2YJU7rtRQVhHq-nwU",range:"Main!A2:G"}];let Y=0,y=0,h=0,i=0,k=0;I(async()=>{const r=x.query.tab;r==="Search"?D(r):O("Stats"),await W(),g.value=!1,n.value.forEach(u=>{A.includes(u[s.artist])||A.push(u[s.artist]);const S=Number(u[s.year]);S<w.value&&(w.value=S),k+=S,h++,J(u[s.score])?(i+=Number(u[s.score]),Y++):u[s.score]=="?"&&y++,S>1959?c[T[u[s.year].slice(0,3)+"0s"]]++:c[T["1950s"]]++}),l.value={averageScore:(i/Y).toFixed(2),numberOfArtists:A.length,averageYear:(k/h).toFixed(2),numberOfReleases:Y+y,releasesPerYear:c}});async function W(){n.value=(await Promise.all(C.map(r=>X(r.id,r.range)))).flat().filter(r=>(r.forEach(u=>{u.trim()}),r.length>5&&r[s.score]))}async function X(r,u){return(await fetch(`https://api.danielturcich.com/Sheets?id=${r}&range=${u}`)).json()}function J(r){return!isNaN(Number(r))}function D(r){f.value=r}function O(r){const u={query:{tab:r}};r==="Search"&&(u.query.type="artist"),b.replace(u),D(r)}return(r,u)=>(o(),v("div",Je,[Qe,t("div",null,[t("button",{class:"tw-tab-button",type:"button",onClick:u[0]||(u[0]=S=>O("Stats"))}," Stats "),t("button",{class:"tw-tab-button",type:"button",onClick:u[1]||(u[1]=S=>O("Search"))}," Search ")]),a(f)==="Stats"?(o(),L(Xe,{key:0,"stats-object":a(l)},null,8,["stats-object"])):a(f)==="Search"?(o(),L(Le,{key:1,"current-year":a(_),"earliest-year":w.value,"releases-array":n.value,initializing:g.value},null,8,["current-year","earliest-year","releases-array","initializing"])):z("",!0)]))}});export{et as default};
